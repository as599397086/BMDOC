
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="贝格迈思数据库使用手册">
      
      
      
      
        <link rel="prev" href="Character.html">
      
      
        <link rel="next" href="json.html">
      
      
      <link rel="icon" href="../../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>date与time - 手册</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="mo" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#_1" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      <!--
  Copyright (c) 2016-2024 Martin Donath <martin.donath@squidfunk.com>

  Permission is hereby granted, free of charge, to any person obtaining a copy
  of this software and associated documentation files (the "Software"), to
  deal in the Software without restriction, including without limitation the
  rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
  sell copies of the Software, and to permit persons to whom the Software is
  furnished to do so, subject to the following conditions:

  The above copyright notice and this permission notice shall be included in
  all copies or substantial portions of the Software.

  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
  FITNESS FOR A PARTICULAR PURPOSE AND NON-INFRINGEMENT. IN NO EVENT SHALL THE
  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
  IN THE SOFTWARE.
-->

<!-- Determine classes -->


  


<!-- Header -->
<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav
    class="md-header__inner md-grid"
    aria-label="页眉"
  >

    <!-- Link to home -->
    <a
      href="../../index.html"
      title="手册"
      class="md-header__button md-logo"
      aria-label="手册"
      data-md-component="logo"
    >
      
  <img src="../../assets/new-logo.png" alt="logo">

    </a>

    <!-- Button to open drawer -->
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>

    <!-- Header title -->
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            手册
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              date与time
            
          </span>
        </div>
      </div>
    </div>

    <!-- Color palette toggle -->
    
      
    

    <!-- User preference: color palette -->
    

    <!-- Site language selector -->
    

    <!-- Button to open search modal -->
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>

      <!-- Search interface -->
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="分享" aria-label="分享" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    

    <!-- Repository information -->
    
      <div class="md-header__source">
        <a href="https://github.com/as599397086/BMDOC" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>

  <!-- Navigation tabs (sticky) -->
  
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../index.html" title="手册" class="md-nav__button md-logo" aria-label="手册" data-md-component="logo">
      
  <img src="../../assets/new-logo.png" alt="logo">

    </a>
    手册
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/as599397086/BMDOC" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../index.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AiSQL简介
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B/%E5%BF%AB%E9%80%9F%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    快速上手
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../%E5%BA%94%E7%94%A8%E5%BC%80%E5%8F%91/%E6%9E%84%E5%BB%BA%E5%BA%94%E7%94%A8/JAVA.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    应用开发
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E9%83%A8%E7%BD%B2%E9%9B%86%E7%BE%A4/%E8%BD%AF%E7%A1%AC%E4%BB%B6%E7%8E%AF%E5%A2%83%E9%9C%80%E6%B1%82.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    部署集群
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../05-%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数据迁移
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E7%AE%A1%E7%90%86%E6%95%B0%E6%8D%AE%E5%BA%93/%E9%9B%86%E7%BE%A4%E7%AE%A1%E7%90%86%E4%B8%8E%E7%9B%91%E6%8E%A7.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    管理数据库
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../07-%E5%90%91%E9%87%8F%E7%89%B9%E6%80%A7.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    向量特性
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../AI%E7%89%B9%E6%80%A7/%E6%A6%82%E8%BF%B0.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    AI特性
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

    
      
      
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" checked>
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    参考
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            参考
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E6%9E%B6%E6%9E%84/%E8%AE%BE%E8%AE%A1%E7%9B%AE%E6%A0%87.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    架构
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    
  
  
    <a href="../../CLIs/sqlsh/%E6%A6%82%E8%BF%B0.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    CLIs
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

  

      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../%E9%85%8D%E7%BD%AE/bm-mserver.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    配置
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4" checked>
        
          
          <label class="md-nav__link" for="__nav_9_4" id="__nav_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    BSQL
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_9_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_4">
            <span class="md-nav__icon md-icon"></span>
            BSQL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9_4_1" checked>
        
          
          <label class="md-nav__link" for="__nav_9_4_1" id="__nav_9_4_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    数据类型
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_9_4_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_9_4_1">
            <span class="md-nav__icon md-icon"></span>
            数据类型
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数组
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="PLpgSQL%E4%B8%AD%E7%9A%84%E6%95%B0%E7%BB%84%E5%BE%AA%E7%8E%AF.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PL/pgSQL中的数组循环
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E4%BD%BF%E7%94%A8DOMAIN%E5%80%BC%E6%95%B0%E7%BB%84.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    使用DOMAIN值数组
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E6%95%B0%E7%BB%84%E5%87%BD%E6%95%B0%E5%92%8C%E8%BF%90%E7%AE%97%E7%AC%A6.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数组函数和运算符
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="Binary.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Binary
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="Boolean.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Boolean
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="Character.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Character
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    date与time
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="date%E4%B8%8Etime.html" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    date与time
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    概要
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#date" class="md-nav__link">
    date
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utc" class="md-nav__link">
    时区和UTC偏移
  </a>
  
    <nav class="md-nav" aria-label="时区和UTC偏移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    时区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc_1" class="md-nav__link">
    UTC偏移
  </a>
  
    <nav class="md-nav" aria-label="UTC偏移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utc_2" class="md-nav__link">
    指定UTC偏移的四种方法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc_3" class="md-nav__link">
    使用UTC偏移量的三个语法上下文
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timestamptimestamptz" class="md-nav__link">
    timestamp与timestamptz
  </a>
  
    <nav class="md-nav" aria-label="timestamp与timestamptz">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timestamp" class="md-nav__link">
    timestamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamptz" class="md-nav__link">
    timestamptz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    夏令时
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interval" class="md-nav__link">
    interval
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    时间/日期函数
  </a>
  
    <nav class="md-nav" aria-label="时间/日期函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    创建函数
  </a>
  
    <nav class="md-nav" aria-label="创建函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make_date" class="md-nav__link">
    make_date()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_time" class="md-nav__link">
    make_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_timestamp" class="md-nav__link">
    make_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_timestamptz" class="md-nav__link">
    make_timestamptz()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to_timestamp" class="md-nav__link">
    to_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_interval" class="md-nav__link">
    make_interval()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    操作函数
  </a>
  
    <nav class="md-nav" aria-label="操作函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#date_trunc" class="md-nav__link">
    date_trunc()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#justify_days" class="md-nav__link">
    justify_days()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#justify_hours" class="md-nav__link">
    justify_hours()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#justify_interval" class="md-nav__link">
    justify_interval()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    当前日期/时间函数
  </a>
  
    <nav class="md-nav" aria-label="当前日期/时间函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current_date" class="md-nav__link">
    current_date
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current_time" class="md-nav__link">
    current_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current_timestamp" class="md-nav__link">
    current_timestamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localtime" class="md-nav__link">
    localtime()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localtimestamp" class="md-nav__link">
    localtimestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transaction_timestamp" class="md-nav__link">
    transaction_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#now" class="md-nav__link">
    now()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statement_timestamp" class="md-nav__link">
    statement_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock_timestamp" class="md-nav__link">
    clock_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeofday" class="md-nav__link">
    timeofday()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    延时执行函数
  </a>
  
    <nav class="md-nav" aria-label="延时执行函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pg_sleep" class="md-nav__link">
    pg_sleep()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pg_sleep_for" class="md-nav__link">
    pg_sleep_for()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pg_sleep_until" class="md-nav__link">
    pg_sleep_until()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    其它函数和操作符
  </a>
  
    <nav class="md-nav" aria-label="其它函数和操作符">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isfinite" class="md-nav__link">
    isfinite()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#age" class="md-nav__link">
    age()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timezone" class="md-nav__link">
    timezone()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-date_part" class="md-nav__link">
    extract() / date_part()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlaps" class="md-nav__link">
    OVERLAPS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    格式化函数
  </a>
  
    <nav class="md-nav" aria-label="格式化函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    格式化函数
  </a>
  
    <nav class="md-nav" aria-label="格式化函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to_char" class="md-nav__link">
    to_char()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to_date" class="md-nav__link">
    to_date()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to_timestamp_1" class="md-nav__link">
    to_timestamp()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    日期-时间模板模式
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="json.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    json
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="Money.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Money
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E6%95%B0%E5%AD%97%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    数字类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E8%8C%83%E5%9B%B4%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    范围类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="Serial.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Serial
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="UUID.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    UUID
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E6%9E%9A%E4%B8%BE%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    枚举类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E5%87%A0%E4%BD%95%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    几何类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    网络地址类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E4%BD%8D%E4%B8%B2%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    位串类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E6%96%87%E6%9C%AC%E6%90%9C%E7%B4%A2%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    文本搜索类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E5%9F%9F%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    域类型
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="%E4%BC%AA%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    伪类型
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../BSQL%E8%AF%AD%E8%A8%80.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BSQL语言
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../%E5%86%85%E7%BD%AE%E5%87%BD%E6%95%B0%E5%92%8C%E8%BF%90%E7%AE%97%E7%AC%A6/%E9%80%BB%E8%BE%91%E6%93%8D%E4%BD%9C%E7%AC%A6.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    内置函数和运算符
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../%E5%85%B3%E9%94%AE%E8%AF%8D.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关键词
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../%E4%BF%9D%E7%95%99%E5%90%8D%E7%A7%B0.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    保留名称
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../%E7%B3%BB%E7%BB%9F%E8%A1%A8%E8%A7%86%E5%9B%BE.html" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    系统表/视图
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--pruned md-nav__item--nested">
      
        
  
  
    <a href="../../BCQL/%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.html" class="md-nav__link">
      
  
  <span class="md-ellipsis">
    BCQL
  </span>
  

      
        <span class="md-nav__icon md-icon"></span>
      
    </a>
  

      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    概要
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#date" class="md-nav__link">
    date
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#time" class="md-nav__link">
    time
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utc" class="md-nav__link">
    时区和UTC偏移
  </a>
  
    <nav class="md-nav" aria-label="时区和UTC偏移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_2" class="md-nav__link">
    时区
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc_1" class="md-nav__link">
    UTC偏移
  </a>
  
    <nav class="md-nav" aria-label="UTC偏移">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utc_2" class="md-nav__link">
    指定UTC偏移的四种方法
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#utc_3" class="md-nav__link">
    使用UTC偏移量的三个语法上下文
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#timestamptimestamptz" class="md-nav__link">
    timestamp与timestamptz
  </a>
  
    <nav class="md-nav" aria-label="timestamp与timestamptz">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#timestamp" class="md-nav__link">
    timestamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timestamptz" class="md-nav__link">
    timestamptz
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_3" class="md-nav__link">
    夏令时
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interval" class="md-nav__link">
    interval
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_4" class="md-nav__link">
    时间/日期函数
  </a>
  
    <nav class="md-nav" aria-label="时间/日期函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_5" class="md-nav__link">
    创建函数
  </a>
  
    <nav class="md-nav" aria-label="创建函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#make_date" class="md-nav__link">
    make_date()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_time" class="md-nav__link">
    make_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_timestamp" class="md-nav__link">
    make_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_timestamptz" class="md-nav__link">
    make_timestamptz()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to_timestamp" class="md-nav__link">
    to_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#make_interval" class="md-nav__link">
    make_interval()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_6" class="md-nav__link">
    操作函数
  </a>
  
    <nav class="md-nav" aria-label="操作函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#date_trunc" class="md-nav__link">
    date_trunc()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#justify_days" class="md-nav__link">
    justify_days()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#justify_hours" class="md-nav__link">
    justify_hours()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#justify_interval" class="md-nav__link">
    justify_interval()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_7" class="md-nav__link">
    当前日期/时间函数
  </a>
  
    <nav class="md-nav" aria-label="当前日期/时间函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#current_date" class="md-nav__link">
    current_date
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current_time" class="md-nav__link">
    current_time()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#current_timestamp" class="md-nav__link">
    current_timestamp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localtime" class="md-nav__link">
    localtime()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#localtimestamp" class="md-nav__link">
    localtimestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transaction_timestamp" class="md-nav__link">
    transaction_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#now" class="md-nav__link">
    now()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#statement_timestamp" class="md-nav__link">
    statement_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#clock_timestamp" class="md-nav__link">
    clock_timestamp()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timeofday" class="md-nav__link">
    timeofday()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_8" class="md-nav__link">
    延时执行函数
  </a>
  
    <nav class="md-nav" aria-label="延时执行函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pg_sleep" class="md-nav__link">
    pg_sleep()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pg_sleep_for" class="md-nav__link">
    pg_sleep_for()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pg_sleep_until" class="md-nav__link">
    pg_sleep_until()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#_9" class="md-nav__link">
    其它函数和操作符
  </a>
  
    <nav class="md-nav" aria-label="其它函数和操作符">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#isfinite" class="md-nav__link">
    isfinite()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#age" class="md-nav__link">
    age()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#timezone" class="md-nav__link">
    timezone()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extract-date_part" class="md-nav__link">
    extract() / date_part()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#overlaps" class="md-nav__link">
    OVERLAPS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_10" class="md-nav__link">
    格式化函数
  </a>
  
    <nav class="md-nav" aria-label="格式化函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#_11" class="md-nav__link">
    格式化函数
  </a>
  
    <nav class="md-nav" aria-label="格式化函数">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to_char" class="md-nav__link">
    to_char()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to_date" class="md-nav__link">
    to_date()
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to_timestamp_1" class="md-nav__link">
    to_timestamp()
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-" class="md-nav__link">
    日期-时间模板模式
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/as599397086/BMDOC/edit/master/docs/BSQL/数据类型/date与time.md" title="编辑此页" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  
    
      
    
    <a href="https://github.com/as599397086/BMDOC/raw/master/docs/BSQL/数据类型/date与time.md" title="查看本页的源代码" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.15 8.15 0 0 1-1.23-2Z"/></svg>
    </a>
  


  <h1>date与time</h1>

<h2 id="_1"><strong>概要</strong><a class="headerlink" href="#_1" title="Permanent link">&para;</a></h2>
<p>BSQL支持以下数据类型的值，这些值表示日期、时间、日期和时间，或持续时间。这些数据类型将被统称为日期-时间数据类型，如下表格所示：</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>存储</th>
<th>描述</th>
<th>最小值</th>
<th>最大值</th>
<th>解析度</th>
</tr>
</thead>
<tbody>
<tr>
<td>date</td>
<td>4字节</td>
<td>日期（没有一天中的时间）</td>
<td>4713 BC</td>
<td>5874897 AD</td>
<td>1日</td>
</tr>
<tr>
<td>time [ (p) ]</td>
<td>8字节</td>
<td>一天中的时间（无日期）</td>
<td>00:00:00</td>
<td>24:00:00</td>
<td>1微秒</td>
</tr>
<tr>
<td>timestamp [ (p) ]</td>
<td>12字节</td>
<td>包括日期和时间</td>
<td>4713 BC</td>
<td>294276 AD</td>
<td>1微秒</td>
</tr>
<tr>
<td>timestamptz [(p)]</td>
<td>12字节</td>
<td>包括日期和时间</td>
<td>4713 BC</td>
<td>294276 AD</td>
<td>1微秒</td>
</tr>
<tr>
<td>interval</td>
<td>16字节</td>
<td>时间间隔</td>
<td></td>
<td></td>
<td>1微秒</td>
</tr>
<tr>
<td>timetz [(p)]</td>
<td></td>
<td>不推荐使用</td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>可选的 (p) 限定符，其中p是0..6中的整数值，以微秒为单位指定记录值的精度。（它对内部表示的大小没有影响。）仅在区间声明中有效的可选字段限定符，请参见区间数据类型。   <br />
timestamptz 是一个别名，被接受为timestamp with time zone的一种简写，由PostgreSQL定义并由BSQL继承，SQL标准将其拼写为带时区的时间戳。不加修饰的timestamp由SQL标准定义，并且可以选择性地拼写为不带时区的timestamp，也适用于timetz和time。</p>
<p>注：避免使用“timetz”数据类型。 
PostgreSQL文档建议不要使用timetz（又称带时区的时间）数据类型： 
带时区的数据类型时间是由SQL标准定义的，但该定义显示的属性导致有用性受到质疑。在大多数情况下，日期、（普通）时间、（纯）时间戳和时间戳的组合，应该提供任何应用程序可能需要的完整的日期-时间功能范围。 </p>
<p>特殊值
为了方便，PostgreSQL和BSQL支持一些特殊日期/时间输入值，如下表所示。这些值中infinity和-infinity被在系统内部以特殊方式表示并且将被原封不动地显示。但是其他的仅仅只是概念上的速写，当被读到的时候会被转换为正常的日期/时间值（特殊地，now及相关串在被读到时立刻被转换到一个指定的时间值）。在作为常量在SQL命令中使用时，所有这些值需要被包括在单引号内。请参见PostgreSQL文档<a href="#DATATYPE-DATETIME-SPECIAL-VALUES">Special Values</a></p>
<table>
<thead>
<tr>
<th>输入串</th>
<th>合法类型</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>'epoch'</td>
<td>date, timestamp</td>
<td>1970-01-01 00:00:00+00（Unix系统时间0）</td>
</tr>
<tr>
<td>'infinity'</td>
<td>date, timestamp, timestamptz</td>
<td>比任何其他时间戳都晚</td>
</tr>
<tr>
<td>'-infinity'</td>
<td>date, timestamp</td>
<td>比任何其他时间戳都早</td>
</tr>
<tr>
<td>'now'</td>
<td>date, time, timestamp</td>
<td>当前事务的开始时间</td>
</tr>
<tr>
<td>'today'</td>
<td>date, timestamp</td>
<td>今日午夜 (00:00)</td>
</tr>
<tr>
<td>'tomorrow'</td>
<td>date, timestamp</td>
<td>明日午夜 (00:00)</td>
</tr>
<tr>
<td>'yesterday'</td>
<td>date, timestamp</td>
<td>昨日午夜 (00:00)</td>
</tr>
<tr>
<td>'allballs'</td>
<td>time</td>
<td>00:00:00.00 UTC</td>
</tr>
</tbody>
</table>
<p>注：除了“infinity”和“-infinity”，请避免使用所有这些特殊常量。而且，即使是针对与“infinity”和“-infinity”，也并不是适用于所有地方，例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a>select &#39;infinity&#39;::timestamptz - clock_timestamp();
</span></code></pre></div></td></tr></table></div>
<p>会报告错误信息：cannot subtract infinite timestamps</p>
<p>同样，select 'infinity'::interval;
也会报告错误信息：invalid input syntax for type interval: "infinity"</p>
<h2 id="date"><strong>date</strong><a class="headerlink" href="#date" title="Permanent link">&para;</a></h2>
<p>数据类型为date的值，表示本地某个时刻（年、月和日）的日期。
日期的输入可以接受几乎任何合理的格式，包括 ISO 8601、SQL-兼容的、传统POSTGRES的和其他的形式。对于一些格式，日期输入里的日、月和年的顺序会让人混淆， 并且支持指定所预期的这些域的顺序。把DateStyle参数设置为MDY，就是选择“月－日－年”的解释，设置为DMY就是 “日－月－年”，而YMD是 “年－月－日”。</p>
<p>请记住任何日期或者时间的文字输入需要由单引号包围，就象一个文本字符串一样。</p>
<p>如下表中示例展示了可能的日期输入：</p>
<table>
<thead>
<tr>
<th>示例</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1999-01-08</td>
<td>ISO 8601; 任何模式下的1月8日（推荐格式）</td>
</tr>
<tr>
<td>January 8, 1999</td>
<td>在任何datestyle输入模式下都无歧义</td>
</tr>
<tr>
<td>&#8539;/1999</td>
<td>MDY模式中的1月8日；DMY模式中的8月1日</td>
</tr>
<tr>
<td>1/18/1999</td>
<td>MDY模式中的1月18日；在其他模式中被拒绝</td>
</tr>
<tr>
<td>01/02/03</td>
<td>MDY模式中的2003年1月2日；DMY模式中的2003年2月1日； YMD模式中的2001年2月3日</td>
</tr>
<tr>
<td>1999-Jan-08</td>
<td>任何模式下的1月8日</td>
</tr>
<tr>
<td>Jan-08-1999</td>
<td>任何模式下的1月8日</td>
</tr>
<tr>
<td>08-Jan-1999</td>
<td>任何模式下的1月8日</td>
</tr>
<tr>
<td>99-Jan-08</td>
<td>YMD模式中的1月8日，否则错误</td>
</tr>
<tr>
<td>08-Jan-99</td>
<td>1月8日，在YMD模式中错误</td>
</tr>
<tr>
<td>Jan-08-99</td>
<td>1月8日，在YMD模式中错误</td>
</tr>
<tr>
<td>19990108</td>
<td>ISO 8601; 任何模式中的1999年1月8日</td>
</tr>
<tr>
<td>990108</td>
<td>ISO 8601; 任何模式中的1999年1月8日</td>
</tr>
<tr>
<td>1999.008</td>
<td>年和一年中的天数</td>
</tr>
<tr>
<td>J2451187</td>
<td>儒略日期</td>
</tr>
<tr>
<td>January 8, 99 BC</td>
<td>公元前99年</td>
</tr>
</tbody>
</table>
<p>时间的输出格式可以设成四种风格之一： ISO 8601、SQL（Ingres）、传统的POSTGRES（Unix的date格式）或 German 。缺省是ISO格式（ISO标准要求使用 ISO 8601 格式。）。下表显示了每种输出风格的示例：</p>
<table>
<thead>
<tr>
<th>风格声明</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>ISO</td>
<td>ISO 8601, SQL标准</td>
<td>1997-12-17</td>
</tr>
<tr>
<td>SQL</td>
<td>传统风格</td>
<td>12/17/1997</td>
</tr>
<tr>
<td>Postgres</td>
<td>原始风格</td>
<td>Wed Dec 17</td>
</tr>
<tr>
<td>German</td>
<td>地区风格</td>
<td>17.12.1997</td>
</tr>
</tbody>
</table>
<p>SQL和POSTGRES风格中，如果DMY域顺序被指定，“日”将出现在“月”之前，否则“月”出现在“日”之前。示例如下表所示：</p>
<table>
<thead>
<tr>
<th>datestyle设置</th>
<th>输入顺序</th>
<th>示例输出</th>
</tr>
</thead>
<tbody>
<tr>
<td>SQL, DMY</td>
<td>日/月/年</td>
<td>17/12/1997 15:37:16.00 CET</td>
</tr>
<tr>
<td>SQL, MDY</td>
<td>月/日/年</td>
<td>12/17/1997 07:37:16.00 PST</td>
</tr>
<tr>
<td>Postgres, DMY</td>
<td>日/月/年</td>
<td>Wed 17 Dec 07:37:16 1997 PST</td>
</tr>
</tbody>
</table>
<p>请注意，从另一个日期值中减去一个日期会产生一个整数值：两个指定日期之间的天数，该值对公历闰年敏感。例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1"></a>select pg_typeof(&#39;2019-02-14&#39;::date - &#39;2018-02-14&#39;::date)::text as &quot;data type of difference between dates&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1"></a> data type of difference between dates
</span><span id="__span-2-2"><a id="__codelineno-2-2" name="__codelineno-2-2"></a>----------------------------------------------
</span><span id="__span-2-3"><a id="__codelineno-2-3" name="__codelineno-2-3"></a> Integer
</span></code></pre></div></td></tr></table></div>
<h2 id="time"><strong>time</strong><a class="headerlink" href="#time" title="Permanent link">&para;</a></h2>
<p>数据类型为time的值，表示本地某个时刻的时间，小时和分钟为整数值，秒为微秒精度的实数值。
time类型可细分为是time [ (p) ] without time zone和time [ (p) ] with time zone。 只写time等效于time without time zone。 
这些类型的有效输入，是由当日时间后面跟着可选的时区组成，见下表示例所示。
如果在time without time zone的输入中指定了时区，那么它会被忽略。也可以指定一个日期，但是它也会被忽略，除非你使用了一个涉及到夏令时规则的时区，例如America/New_York。在这种情况下，为了判断是应用了标准时间还是夏令时时间，要求指定该日期。适当的时区偏移被记录在time with time zone值中。</p>
<p>有效时间输入示例： </p>
<table>
<thead>
<tr>
<th>示例</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>04:05:06.789</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>04:05:06</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>04:05</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>040506</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>04:05 AM</td>
<td>和04:05一样，AM并不影响值</td>
</tr>
<tr>
<td>04:05 PM</td>
<td>和16:05一样，输入的小时必须为 &lt;= 12</td>
</tr>
<tr>
<td>04:05:06.789-8</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>04:05:06-08:00</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>04:05-08:00</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>040506-08</td>
<td>ISO 8601</td>
</tr>
<tr>
<td>04:05:06 PST</td>
<td>缩写指定的时区</td>
</tr>
<tr>
<td>2003-04-12 04:05:06 America/New_York</td>
<td>全名指定的时区</td>
</tr>
</tbody>
</table>
<p>有效时区输入示例：</p>
<table>
<thead>
<tr>
<th>示例</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>PST</td>
<td>缩写（太平洋标准时间）</td>
</tr>
<tr>
<td>America/New_York</td>
<td>完整时区名</td>
</tr>
<tr>
<td>PST8PDT</td>
<td>POSIX风格的时区声明</td>
</tr>
<tr>
<td>-8:00</td>
<td>PST的ISO-8601偏移</td>
</tr>
<tr>
<td>-800</td>
<td>PST的ISO-8601偏移</td>
</tr>
<tr>
<td>-8</td>
<td>PST的ISO-8601偏移</td>
</tr>
<tr>
<td>zulu</td>
<td>UTC的军方缩写</td>
</tr>
<tr>
<td>z</td>
<td>zulu的短形式</td>
</tr>
</tbody>
</table>
<p>由于时间值对时区一无所知，他们也对夏令时制度一无所知：每天都应该从午夜（含）开始，一直持续到下一个午夜（不含）结束。见下例所示：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span>
<span class="normal"><a href="#__codelineno-3-2">2</a></span>
<span class="normal"><a href="#__codelineno-3-3">3</a></span>
<span class="normal"><a href="#__codelineno-3-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1"></a>select
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2"></a>  (&#39;00:00:00.000000&#39;::time)::text as &quot;starting midnight&quot;,
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3"></a>  (&#39;23:59:59.999999&#39;::time)::text as &quot;just before ending midnight&quot;,
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4"></a>  (&#39;24:00:00.000000&#39;::time)::text as &quot;ending midnight&quot;;
</span></code></pre></div></td></tr></table></div>
<p>事实上，存在一个小小的烦恼，就是这两个time（'00:00:00.000000'，'24:00:00.000000'）并不相等，见下例所示 ：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1">1</a></span>
<span class="normal"><a href="#__codelineno-4-2">2</a></span>
<span class="normal"><a href="#__codelineno-4-3">3</a></span>
<span class="normal"><a href="#__codelineno-4-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1"></a> select (
</span><span id="__span-4-2"><a id="__codelineno-4-2" name="__codelineno-4-2"></a>  &#39;00:00:00.000000&#39;::time =
</span><span id="__span-4-3"><a id="__codelineno-4-3" name="__codelineno-4-3"></a>  &#39;24:00:00.000000&#39;::time
</span><span id="__span-4-4"><a id="__codelineno-4-4" name="__codelineno-4-4"></a>  )::text;
</span></code></pre></div></td></tr></table></div>
<p>结果返回false。由于时间值不包含日期信息，您需要定义并公布辅助应用程序语义，以将24:00:00解释为特定日期的结束，而不是前一天的开始，如下进一步展示：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1">1</a></span>
<span class="normal"><a href="#__codelineno-5-2">2</a></span>
<span class="normal"><a href="#__codelineno-5-3">3</a></span>
<span class="normal"><a href="#__codelineno-5-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1"></a>select
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2"></a>  (&#39;02:00:00&#39;::time - &#39;01:00:00&#39;::time)::text as &quot;interval 1&quot;,
</span><span id="__span-5-3"><a id="__codelineno-5-3" name="__codelineno-5-3"></a>  (&#39;24:00:00&#39;::time - &#39;00:00:00&#39;::time)::text as &quot;interval 2&quot;,
</span><span id="__span-5-4"><a id="__codelineno-5-4" name="__codelineno-5-4"></a>  justify_hours(&#39;24:00:00&#39;::time - &#39;00:00:00&#39;::time)::text as &quot;interval 3&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1"></a> interval 1 | interval 2 | interval 3
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2"></a>------------+------------+------------
</span><span id="__span-6-3"><a id="__codelineno-6-3" name="__codelineno-6-3"></a> 01:00:00   | 24:00:00   | 1 day
</span></code></pre></div></td></tr></table></div>
<p>这里还有另一个烦恼：在日期值中添加间隔值可能会导致环绕。见下例所示 ：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1"></a>select &#39;24:00:00&#39;::time + &#39;1 second&#39;::interval;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1"></a> 00:00:01
</span></code></pre></div></td></tr></table></div>
<h2 id="utc"><strong>时区和UTC偏移</strong><a class="headerlink" href="#utc" title="Permanent link">&para;</a></h2>
<h3 id="_2"><strong>时区</strong><a class="headerlink" href="#_2" title="Permanent link">&para;</a></h3>
<p>时区和时区习惯不仅仅受地球几何形状的影响，还受到政治决定的影响。 到了19世纪，全球的时区变得稍微标准化了些，但是还是易于遭受随意的修改，部分是因为夏时制规则。
SQL标准在日期和时间类型和功能上有一些奇怪的混淆。两个显而易见的问题是：</p>
<ul>
<li>尽管date类型与时区没有联系，而time类型却可以有。 然而，现实世界的时区只有在与时间和日期都关联时才有意义， 因为偏移（时差）可能因为实行类似夏时制这样的制度而在一年里有所变化。</li>
<li>缺省的时区会指定一个到UTC的数字常量偏移（时差）。因此，当跨DST边界做日期/时间算术时， 我们根本不可能适应于夏时制时间。</li>
</ul>
<p>为了克服这些困难，我们建议在使用时区的时候，使用那些同时包含日期和时间的日期/时间类型。我们不建议使用类型 time with time zone。 假设你用于任何类型的本地时区都只包含日期或时间。</p>
<p>在系统内部，所有时区相关的日期和时间都用UTC存储。它们在被显示给客户端之前，会被转换成由TimeZone配置参数指定的本地时间。</p>
<p>允许你使用三种不同形式指定时区：</p>
<ul>
<li>
<p>一个完整的时区名字，例如America/New_York。能被识别的时区名字被列在pg_timezone_names视图中。用广泛使用的 IANA 时区数据来实现该目的，因此相同的时区名字也可以在其他软件中被识别。</p>
</li>
<li>
<p>一个时区缩写，例如PST。这样一种声明仅仅定义了到UTC的一个特定偏移，而不像完整时区名那样指出整套夏令时转换规则。 能被识别的缩写被列在pg_timezone_abbrevs视图中。 你不能将配置参数TimeZone或log_timezone设置成一个时区缩写，但是你可以在日期/时间输入值和AT TIME ZONE操作符中使用时区缩写。</p>
</li>
</ul>
<p>除了时区名和缩写，接受POSIX-风格的时区规范。 这个选项通常不优先用于指定时区，但是，如果没有合适的IANA时区条目，这可能是必要的。</p>
<p>简而言之，在缩写和全称之间是有不同的：缩写表示从UTC开始的一个特定偏移量， 而很多全称表示一个本地夏令时规则并且因此具有两种可能的UTC偏移量。例如， 2014-06-04 12:00 America/New_York表示纽约本地时间的中午， 这个特殊的日期是东部夏令时间（UTC-4）。因此2014-06-04 12:00 EDT 指定的是同一个时间点。但是2014-06-04 12:00 EST指定东部标准时间的 中午（UTC-5），不管在那个日期夏令时是否生效。</p>
<p>更要命的是，某些行政区已经使用相同的时区缩写在不同的时间表示不同的 UTC 偏移量。例如， 在莫斯科MSK在某些年份表示 UTC+3 而在另一些年份表示 UTC+4。 根据指定的日期它们到底表示什么（或者最近表示什么） 来解释这种缩写。但是，正如上面的EST示例所示，这并不是必须和那一天的本地 标准时间相同。</p>
<p>在所有情况下，时区名及其缩写都是大小写不敏感的。</p>
<p>TimeZone配置参数可以在文件postgresql.conf中被设置。同时也有一些特殊的方法来设置它。</p>
<p>SQL命令SET TIME ZONE为会话设置时区。它是SET TIMEZONE TO的另一种拼写，它更加符合SQL的语法。</p>
<p>“timezone”和“time zone”这两种拼写形式都出现在SQL语法中。例如，set timezone = <arg>和set time zone <arg> 都是合法的。</p>
<p>AiSQL 中包含有两个相关的目录视图，用下面SQL可以获取：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1">1</a></span>
<span class="normal"><a href="#__codelineno-9-2">2</a></span>
<span class="normal"><a href="#__codelineno-9-3">3</a></span>
<span class="normal"><a href="#__codelineno-9-4">4</a></span>
<span class="normal"><a href="#__codelineno-9-5">5</a></span>
<span class="normal"><a href="#__codelineno-9-6">6</a></span>
<span class="normal"><a href="#__codelineno-9-7">7</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1"></a>select table_name as &quot;name&quot;
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2"></a>from information_schema.views
</span><span id="__span-9-3"><a id="__codelineno-9-3" name="__codelineno-9-3"></a>where lower(table_schema) = &#39;pg_catalog&#39;
</span><span id="__span-9-4"><a id="__codelineno-9-4" name="__codelineno-9-4"></a>and (
</span><span id="__span-9-5"><a id="__codelineno-9-5" name="__codelineno-9-5"></a>  lower(table_name) like &#39;%zone%&#39; or
</span><span id="__span-9-6"><a id="__codelineno-9-6" name="__codelineno-9-6"></a>  lower(table_name) like &#39;%time%&#39;)
</span><span id="__span-9-7"><a id="__codelineno-9-7" name="__codelineno-9-7"></a>order by 1;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span>
<span class="normal"><a href="#__codelineno-10-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1"></a> pg_timezone_abbrevs
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2"></a> pg_timezone_names
</span></code></pre></div></td></tr></table></div>
<p>pg_timezone_names视图不一定明确地告诉您，特定时区是否遵守夏令时。但对于这样做的时区，当夏令时生效时，is_dst的值将为true。</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1"></a>select is_dst from pg_timezone_names where name =&#39;America/Los_Angeles&#39;;
</span></code></pre></div></td></tr></table></div>
<p>信息返回如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1"></a> is_dst 
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2"></a>--------
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3"></a> t
</span></code></pre></div></td></tr></table></div>
<p>接下来：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1">1</a></span>
<span class="normal"><a href="#__codelineno-13-2">2</a></span>
<span class="normal"><a href="#__codelineno-13-3">3</a></span>
<span class="normal"><a href="#__codelineno-13-4">4</a></span>
<span class="normal"><a href="#__codelineno-13-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1"></a>set timezone = &#39;America/Los_Angeles&#39;;
</span><span id="__span-13-2"><a id="__codelineno-13-2" name="__codelineno-13-2"></a>select
</span><span id="__span-13-3"><a id="__codelineno-13-3" name="__codelineno-13-3"></a>  current_setting(&#39;timezone&#39;)                                     as &quot;timezone&quot;,
</span><span id="__span-13-4"><a id="__codelineno-13-4" name="__codelineno-13-4"></a>  to_char(&#39;2021-01-01 12:00:00 UTC&#39;::timestamptz, &#39;TZH:TZM : TZ&#39;) as &quot;January regime&quot;,
</span><span id="__span-13-5"><a id="__codelineno-13-5" name="__codelineno-13-5"></a>  to_char(&#39;2021-07-01 12:00:00 UTC&#39;::timestamptz, &#39;TZH:TZM : TZ&#39;) as &quot;July regime&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1">1</a></span>
<span class="normal"><a href="#__codelineno-14-2">2</a></span>
<span class="normal"><a href="#__codelineno-14-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1"></a>      timezone       | January regime | July regime
</span><span id="__span-14-2"><a id="__codelineno-14-2" name="__codelineno-14-2"></a>-----------------------------+-------------------+----------------
</span><span id="__span-14-3"><a id="__codelineno-14-3" name="__codelineno-14-3"></a> America/Los_Angeles | -08 : PST      | -07 : PDT
</span></code></pre></div></td></tr></table></div>
<p>创建如下函数：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-15-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-15-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-15-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-15-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-15-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-15-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-15-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-15-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-15-10">10</a></span>
<span class="normal"><a href="#__codelineno-15-11">11</a></span>
<span class="normal"><a href="#__codelineno-15-12">12</a></span>
<span class="normal"><a href="#__codelineno-15-13">13</a></span>
<span class="normal"><a href="#__codelineno-15-14">14</a></span>
<span class="normal"><a href="#__codelineno-15-15">15</a></span>
<span class="normal"><a href="#__codelineno-15-16">16</a></span>
<span class="normal"><a href="#__codelineno-15-17">17</a></span>
<span class="normal"><a href="#__codelineno-15-18">18</a></span>
<span class="normal"><a href="#__codelineno-15-19">19</a></span>
<span class="normal"><a href="#__codelineno-15-20">20</a></span>
<span class="normal"><a href="#__codelineno-15-21">21</a></span>
<span class="normal"><a href="#__codelineno-15-22">22</a></span>
<span class="normal"><a href="#__codelineno-15-23">23</a></span>
<span class="normal"><a href="#__codelineno-15-24">24</a></span>
<span class="normal"><a href="#__codelineno-15-25">25</a></span>
<span class="normal"><a href="#__codelineno-15-26">26</a></span>
<span class="normal"><a href="#__codelineno-15-27">27</a></span>
<span class="normal"><a href="#__codelineno-15-28">28</a></span>
<span class="normal"><a href="#__codelineno-15-29">29</a></span>
<span class="normal"><a href="#__codelineno-15-30">30</a></span>
<span class="normal"><a href="#__codelineno-15-31">31</a></span>
<span class="normal"><a href="#__codelineno-15-32">32</a></span>
<span class="normal"><a href="#__codelineno-15-33">33</a></span>
<span class="normal"><a href="#__codelineno-15-34">34</a></span>
<span class="normal"><a href="#__codelineno-15-35">35</a></span>
<span class="normal"><a href="#__codelineno-15-36">36</a></span>
<span class="normal"><a href="#__codelineno-15-37">37</a></span>
<span class="normal"><a href="#__codelineno-15-38">38</a></span>
<span class="normal"><a href="#__codelineno-15-39">39</a></span>
<span class="normal"><a href="#__codelineno-15-40">40</a></span>
<span class="normal"><a href="#__codelineno-15-41">41</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1"></a>drop function if exists jan_and_jul_tz_abbrevs_and_offsets() cascade;
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2"></a>
</span><span id="__span-15-3"><a id="__codelineno-15-3" name="__codelineno-15-3"></a>create function jan_and_jul_tz_abbrevs_and_offsets()
</span><span id="__span-15-4"><a id="__codelineno-15-4" name="__codelineno-15-4"></a>  returns table(
</span><span id="__span-15-5"><a id="__codelineno-15-5" name="__codelineno-15-5"></a>  name        text,
</span><span id="__span-15-6"><a id="__codelineno-15-6" name="__codelineno-15-6"></a>  jan_abbrev  text,
</span><span id="__span-15-7"><a id="__codelineno-15-7" name="__codelineno-15-7"></a>  jul_abbrev  text,
</span><span id="__span-15-8"><a id="__codelineno-15-8" name="__codelineno-15-8"></a>  jan_offset  interval,
</span><span id="__span-15-9"><a id="__codelineno-15-9" name="__codelineno-15-9"></a>  jul_offset  interval)
</span><span id="__span-15-10"><a id="__codelineno-15-10" name="__codelineno-15-10"></a>  language plpgsql
</span><span id="__span-15-11"><a id="__codelineno-15-11" name="__codelineno-15-11"></a>as $body$
</span><span id="__span-15-12"><a id="__codelineno-15-12" name="__codelineno-15-12"></a>declare
</span><span id="__span-15-13"><a id="__codelineno-15-13" name="__codelineno-15-13"></a>  set_timezone constant text not null := $$set timezone = &#39;%s&#39;$$;
</span><span id="__span-15-14"><a id="__codelineno-15-14" name="__codelineno-15-14"></a>  tz_set                text not null := &#39;&#39;;
</span><span id="__span-15-15"><a id="__codelineno-15-15" name="__codelineno-15-15"></a>  tz_on_entry           text not null := &#39;&#39;;
</span><span id="__span-15-16"><a id="__codelineno-15-16" name="__codelineno-15-16"></a>begin
</span><span id="__span-15-17"><a id="__codelineno-15-17" name="__codelineno-15-17"></a>  show timezone into tz_on_entry;
</span><span id="__span-15-18"><a id="__codelineno-15-18" name="__codelineno-15-18"></a>
</span><span id="__span-15-19"><a id="__codelineno-15-19" name="__codelineno-15-19"></a>  for tz_set in (
</span><span id="__span-15-20"><a id="__codelineno-15-20" name="__codelineno-15-20"></a>    select pg_timezone_names.name as a
</span><span id="__span-15-21"><a id="__codelineno-15-21" name="__codelineno-15-21"></a>    from pg_timezone_names
</span><span id="__span-15-22"><a id="__codelineno-15-22" name="__codelineno-15-22"></a>  ) loop
</span><span id="__span-15-23"><a id="__codelineno-15-23" name="__codelineno-15-23"></a>    execute format(set_timezone, tz_set);
</span><span id="__span-15-24"><a id="__codelineno-15-24" name="__codelineno-15-24"></a>    select
</span><span id="__span-15-25"><a id="__codelineno-15-25" name="__codelineno-15-25"></a>      current_setting(&#39;timezone&#39;),
</span><span id="__span-15-26"><a id="__codelineno-15-26" name="__codelineno-15-26"></a>      to_char(&#39;2021-01-01 12:00:00 UTC&#39;::timestamptz, &#39;TZ&#39;),
</span><span id="__span-15-27"><a id="__codelineno-15-27" name="__codelineno-15-27"></a>      to_char(&#39;2021-07-01 12:00:00 UTC&#39;::timestamptz, &#39;TZ&#39;),
</span><span id="__span-15-28"><a id="__codelineno-15-28" name="__codelineno-15-28"></a>      to_char(&#39;2021-01-01 12:00:00 UTC&#39;::timestamptz, &#39;TZH:TZM&#39;)::interval,
</span><span id="__span-15-29"><a id="__codelineno-15-29" name="__codelineno-15-29"></a>      to_char(&#39;2021-07-01 12:00:00 UTC&#39;::timestamptz, &#39;TZH:TZM&#39;)::interval
</span><span id="__span-15-30"><a id="__codelineno-15-30" name="__codelineno-15-30"></a>    into
</span><span id="__span-15-31"><a id="__codelineno-15-31" name="__codelineno-15-31"></a>      name,
</span><span id="__span-15-32"><a id="__codelineno-15-32" name="__codelineno-15-32"></a>      jan_abbrev,
</span><span id="__span-15-33"><a id="__codelineno-15-33" name="__codelineno-15-33"></a>      jul_abbrev,
</span><span id="__span-15-34"><a id="__codelineno-15-34" name="__codelineno-15-34"></a>      jan_offset,
</span><span id="__span-15-35"><a id="__codelineno-15-35" name="__codelineno-15-35"></a>      jul_offset;
</span><span id="__span-15-36"><a id="__codelineno-15-36" name="__codelineno-15-36"></a>    return next;
</span><span id="__span-15-37"><a id="__codelineno-15-37" name="__codelineno-15-37"></a>  end loop;
</span><span id="__span-15-38"><a id="__codelineno-15-38" name="__codelineno-15-38"></a>
</span><span id="__span-15-39"><a id="__codelineno-15-39" name="__codelineno-15-39"></a>  execute format(set_timezone, tz_on_entry);
</span><span id="__span-15-40"><a id="__codelineno-15-40" name="__codelineno-15-40"></a>end;
</span><span id="__span-15-41"><a id="__codelineno-15-41" name="__codelineno-15-41"></a>$body$;
</span></code></pre></div></td></tr></table></div>
<p>执行如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-16-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-16-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-16-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-16-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-16-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-16-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-16-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-16-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-16-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1"></a>select
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2"></a>  name,
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3"></a>  jan_abbrev,
</span><span id="__span-16-4"><a id="__codelineno-16-4" name="__codelineno-16-4"></a>  jul_abbrev,
</span><span id="__span-16-5"><a id="__codelineno-16-5" name="__codelineno-16-5"></a>  lpad(jan_offset::text, 9) as jan_offset,
</span><span id="__span-16-6"><a id="__codelineno-16-6" name="__codelineno-16-6"></a>  lpad(jul_offset::text, 9) as jul_offset
</span><span id="__span-16-7"><a id="__codelineno-16-7" name="__codelineno-16-7"></a>from jan_and_jul_tz_abbrevs_and_offsets()
</span><span id="__span-16-8"><a id="__codelineno-16-8" name="__codelineno-16-8"></a>where
</span><span id="__span-16-9"><a id="__codelineno-16-9" name="__codelineno-16-9"></a>name = &#39;America/Los_Angeles&#39; or name = &#39;Europe/London&#39;
</span><span id="__span-16-10"><a id="__codelineno-16-10" name="__codelineno-16-10"></a>order by name;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1"></a>        name         | jan_abbrev | jul_abbrev | jan_offset | jul_offset
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2"></a>---------------------+------------+------------+------------+------------
</span><span id="__span-17-3"><a id="__codelineno-17-3" name="__codelineno-17-3"></a> America/Los_Angeles | PST        | PDT        | -08:00:00  | -07:00:00
</span><span id="__span-17-4"><a id="__codelineno-17-4" name="__codelineno-17-4"></a> Europe/London       | GMT        | BST        |  00:00:00  |  01:00:00
</span></code></pre></div></td></tr></table></div>
<p>这两个视图的区别在于：</p>
<ul>
<li>pg_timezone_names从其关键字name映射到缩写和utc_offset，它们的值在夏令时和标准时间段通常不同，映射在任何特定日期都是唯一的。</li>
<li>pg_timezone_abbrevs从其关键字abbrev映射到一个固定的、唯一的utc_offset值。当时区遵循夏令时时，它有两个不同的缩写：一个用于夏令时时段，另一个用于标准时段。</li>
<li>pg_timezone_names.abbrev和pg_timezone_abbevs.abbrev列记录了不同类型的事实。</li>
</ul>
<h3 id="utc_1"><strong>UTC偏移</strong><a class="headerlink" href="#utc_1" title="Permanent link">&para;</a></h3>
<p>所有可能的操作都不可避免地在指定的UTC偏移量的上下文中执行，因为TimeZone会话设置的默认方案确保这永远不是零长度的文本值或null。（请参阅使用会话环境参数TimeZone指定UTC偏移量一节。）TimeZone设置可以将UTC偏移量直接指定为间隔值，也可以通过标识时区间接指定。
但是，只有三个操作对设置敏感：
将timestamp 转换为timestamptz 。
将timestamptz 转换为timestamp 。
向timestamptz 添加或者减去间隔值。 </p>
<h4 id="utc_2">指定UTC偏移的四种方法<a class="headerlink" href="#utc_2" title="Permanent link">&para;</a></h4>
<ul>
<li>直接作为区间值
  要为会话的“时区”设置指定间隔值，必须使用set time zone＜arg＞语法，而不是set timezone= <arg> 语法。例如：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1"></a>set time zone interval &#39;-7 hours&#39;;
</span></code></pre></div></td></tr></table></div>
<p>请注意，在此语法上下文中，只能使用类型名称构造函数指定间隔值。请试着使用以下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1"></a>set time zone &#39;-7 hours&#39;::interval;
</span><span id="__span-19-2"><a id="__codelineno-19-2" name="__codelineno-19-2"></a>
</span><span id="__span-19-3"><a id="__codelineno-19-3" name="__codelineno-19-3"></a>set time zone make_interval(hours =&gt; -7);
</span></code></pre></div></td></tr></table></div>
<p>均会报告语法错误。</p>
<p>但是，at time zone运算符允许任何任意的区间表达式。示例如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1"></a>select &#39;2021-05-27 12:00:00&#39;::timestamp at time zone (make_interval(hours=&gt;5) + make_interval(mins=&gt;45));
</span></code></pre></div></td></tr></table></div>
<p>您还可以在时间戳文本的文本中指定间隔值。但在这里，您仅仅使用带有::interval  类型转换的文本。示例如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1"></a>select &#39;2021-05-27 12:00:00 -03:15:00&#39;::timestamptz;
</span></code></pre></div></td></tr></table></div>
<ul>
<li>直接使用POSIX语法
  该语法在PostgreSQL文档中进行了描述，详细内容请参见PostgreSQL文档相关部分。它允许您指定两个UTC偏移值，一个用于标准时间，另一个用于夏令时间，以及“向前跳跃”和“向后后退”时刻。你极不可能需要使用它，因为如今，地球上的任何地方都属于一个经典命名的时区，该时区是当前理解的夏令时规则的关键，从不确定的过去到不确定的未来。PostgreSQL和AiSQL服务器可以访问这些规则。（来源是所谓的tz数据库。）如果改变了任何规则，那么tz数据库就会更新，新规则就会被采用到PostgreSQL和AiSQL的配置数据中。
  在显示时区，设置为显式间隔值后，执行show timezone，会使用POSIX语法返回报告，尽管这是一种不指定夏令时转换的简单形式。执行如下示例：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span>
<span class="normal"><a href="#__codelineno-22-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1"></a>set time zone interval &#39;-07:30:00&#39;;
</span><span id="__span-22-2"><a id="__codelineno-22-2" name="__codelineno-22-2"></a>show timezone;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1"></a>&lt;-07:30&gt;+07:30
</span></code></pre></div></td></tr></table></div>
<p>再试着执行如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1"></a>set timezone = &#39;&lt;-07:30&gt;+07:30&#39;;
</span><span id="__span-24-2"><a id="__codelineno-24-2" name="__codelineno-24-2"></a>show timezone;
</span></code></pre></div></td></tr></table></div>
<p>返回与上例相同信息，结果完全一样。事实证明，几乎任何包含一个或多个数字的字符串都可以被解释为POSIX语法。试着执行如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-25-1">1</a></span>
<span class="normal"><a href="#__codelineno-25-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1"></a>set timezone = &#39;FooBar5&#39;;
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2"></a>show timezone;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-26-1">1</a></span>
<span class="normal"><a href="#__codelineno-26-2">2</a></span>
<span class="normal"><a href="#__codelineno-26-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1"></a> TimeZone
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2"></a>----------
</span><span id="__span-26-3"><a id="__codelineno-26-3" name="__codelineno-26-3"></a> FOOBAR5
</span></code></pre></div></td></tr></table></div>
<p>现在，您可以很容易地确认的一点就是，在如下：pg_timezone_names.name，pg_timezone_names.abbrev或者 pg_timezone_abbrevs.abbrev中都没有找到FOOBAR5。</p>
<p>现在看看这有什么效果，如下所示：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-27-1">1</a></span>
<span class="normal"><a href="#__codelineno-27-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1"></a>\set bare_date_time &#39;\&#39;2021-04-15 12:00:00\&#39;&#39;
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2"></a>select :bare_date_time::timestamptz;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-28-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1"></a> 2021-04-15 12:00:00-05
</span></code></pre></div></td></tr></table></div>
<p>POSIX取正数表示格林尼治子午线以西。然而，PostgreSQL显示UTC偏移量的约定是将其显示为负值，参见ISO 8601，似乎是绝大多数更常见的约定。互联网搜索似乎总是显示格林尼治以西UTC偏移值为负的地方的时区。试试这个： </p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-29-1">1</a></span>
<span class="normal"><a href="#__codelineno-29-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1"></a>set time zone interval &#39;-5 hours&#39;;
</span><span id="__span-29-2"><a id="__codelineno-29-2" name="__codelineno-29-2"></a>select :bare_date_time::timestamptz;
</span></code></pre></div></td></tr></table></div>
<p>这里，PostgreSQL约定用于指定UTC偏移值。使用相同的：bare_date_time，结果2021-04-15 12:00:00-05与时区设置为FooBar5时的结果相同。</p>
<p>接下来，再试试如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-30-1">1</a></span>
<span class="normal"><a href="#__codelineno-30-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1"></a>set timezone = &#39;Foo5Bar&#39;;
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2"></a>select :bare_date_time::timestamptz;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-31-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1"></a>2021-04-15 12:00:00-04
</span></code></pre></div></td></tr></table></div>
<p>时区设置为FooBar5时，将2021-04-15 12:00:00强制转换为timestamptz 的结果具有负五小时的UTC偏移值。但当时区设置为Foo5Bar时，将相同的timestamp 值强制转换为timestamptz的结果是UTC偏移值为负4小时。您可以猜测，当给出夏令时规则的最简洁规范，在POSIX文本的最后一位数字（至少在本例中）时，这与POSIX编码夏令时规则的方式有关，也与定义的默认值有关（在本例中，夏令时“向前跳”一个小时）。</p>
<ul>
<li>间接使用时区名称 
  这绝大多数是首选方法，因为只有这样，才能根据名称在tz数据库的内部，表示指向的夏令时规则，自动映射UTC偏移值。</li>
<li>间接使用时区缩写
  避免使用这种方法。尽管这种方法是合法的，但AiSQL强烈建议您避免使用它。</li>
</ul>
<h4 id="utc_3">使用UTC偏移量的三个语法上下文<a class="headerlink" href="#utc_3" title="Permanent link">&para;</a></h4>
<ul>
<li>设置环境变量TimeZone
  1）可以在postgresql.conf文件中设置，也可以以PostgreSQL文档的 Server Configuration中描述的任何其他标准方式设置。当未设置PGTZ环境变量时，这在新启动的会话中显示为“TimeZone”会话参数的值。
  2）可以使用PGTZ环境变量进行设置。libpq客户端在连接时，向服务端发送一个set time zone命令。这将覆盖postgresql.conf中的值，这样它也会在新启动的会话中显示为“TimeZone”会话参数的值。
  3）可以在正在进行的会话中，使用通用set timezone=<text literal>语法进行设置，此语法不允许文本表达式。或者，也可以使用特定于时区的set time zone interval＜arg＞语法进行设置。这种拼写还允许设置时区间隔＜text literal＞（注意：文本表达式非法）。此外，它唯一允许set time zone interval＜interval literal＞语法；值得注意的是，只允许使用间隔值的这种语法。 </li>
</ul>
<p>示例如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-32-1">1</a></span>
<span class="normal"><a href="#__codelineno-32-2">2</a></span>
<span class="normal"><a href="#__codelineno-32-3">3</a></span>
<span class="normal"><a href="#__codelineno-32-4">4</a></span>
<span class="normal"><a href="#__codelineno-32-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1"></a>set timezone = &#39;America/New_York&#39;;
</span><span id="__span-32-2"><a id="__codelineno-32-2" name="__codelineno-32-2"></a>
</span><span id="__span-32-3"><a id="__codelineno-32-3" name="__codelineno-32-3"></a>set time zone &#39;Asia/Tehran&#39;;
</span><span id="__span-32-4"><a id="__codelineno-32-4" name="__codelineno-32-4"></a>
</span><span id="__span-32-5"><a id="__codelineno-32-5" name="__codelineno-32-5"></a>set time zone interval &#39;1 hour&#39;;
</span></code></pre></div></td></tr></table></div>
<p>注意：如果在pg_timezone_names中找不到提供的文本，则会尝试将其解析为POSIX语法。结果可能会让你大吃一惊。试着执行下面这个示例： </p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-33-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-33-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-33-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-33-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-33-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-33-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-33-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-33-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-33-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-33-10">10</a></span>
<span class="normal"><a href="#__codelineno-33-11">11</a></span>
<span class="normal"><a href="#__codelineno-33-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1"></a>deallocate all;
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2"></a>prepare stmt as
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3"></a>select &#39;2008-07-01 13:00 America/Los_Angeles&#39;::timestamptz;
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4"></a>
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5"></a>set timezone = &#39;America/Los_Angeles&#39;;
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6"></a>execute stmt;
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7"></a>
</span><span id="__span-33-8"><a id="__codelineno-33-8" name="__codelineno-33-8"></a>set timezone = &#39;-07:00&#39;;
</span><span id="__span-33-9"><a id="__codelineno-33-9" name="__codelineno-33-9"></a>execute stmt;
</span><span id="__span-33-10"><a id="__codelineno-33-10" name="__codelineno-33-10"></a>
</span><span id="__span-33-11"><a id="__codelineno-33-11" name="__codelineno-33-11"></a>set timezone = &#39;Foo-7&#39;;
</span><span id="__span-33-12"><a id="__codelineno-33-12" name="__codelineno-33-12"></a>execute stmt;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-34-1">1</a></span>
<span class="normal"><a href="#__codelineno-34-2">2</a></span>
<span class="normal"><a href="#__codelineno-34-3">3</a></span>
<span class="normal"><a href="#__codelineno-34-4">4</a></span>
<span class="normal"><a href="#__codelineno-34-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1"></a> 2008-07-01 13:00:00-07
</span><span id="__span-34-2"><a id="__codelineno-34-2" name="__codelineno-34-2"></a>
</span><span id="__span-34-3"><a id="__codelineno-34-3" name="__codelineno-34-3"></a> 2008-07-02 03:00:00+07
</span><span id="__span-34-4"><a id="__codelineno-34-4" name="__codelineno-34-4"></a>
</span><span id="__span-34-5"><a id="__codelineno-34-5" name="__codelineno-34-5"></a> 2008-07-02 03:00:00+07
</span></code></pre></div></td></tr></table></div>
<ul>
<li>使用at time zone运算符指定UTC偏移量
  运算符的合法操作数是文本表达式或区间表达式，运算符语法与函数timezone()的语义是相同的。
  以下是四种语法变体的示例：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-35-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-35-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-35-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-35-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-35-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-35-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-35-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-35-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-35-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-35-10">10</a></span>
<span class="normal"><a href="#__codelineno-35-11">11</a></span>
<span class="normal"><a href="#__codelineno-35-12">12</a></span>
<span class="normal"><a href="#__codelineno-35-13">13</a></span>
<span class="normal"><a href="#__codelineno-35-14">14</a></span>
<span class="normal"><a href="#__codelineno-35-15">15</a></span>
<span class="normal"><a href="#__codelineno-35-16">16</a></span>
<span class="normal"><a href="#__codelineno-35-17">17</a></span>
<span class="normal"><a href="#__codelineno-35-18">18</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1"></a>drop function if exists timezone_name() cascade;
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2"></a>create function timezone_name()
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3"></a>  returns text
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4"></a>  language plpgsql
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5"></a>as $body$
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6"></a>begin
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7"></a>  -- Some logic would go here. Just return a manifest constant for this demo.
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8"></a>  return &#39;Europe/Amsterdam&#39;;
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9"></a>end;
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10"></a>$body$;
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11"></a>
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12"></a>select make_timestamp(2021, 6, 1, 12, 13, 19) at time zone timezone_name();
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13"></a>
</span><span id="__span-35-14"><a id="__codelineno-35-14" name="__codelineno-35-14"></a>select timezone(timezone_name(), make_timestamp(2021, 6, 1, 12, 13, 19));
</span><span id="__span-35-15"><a id="__codelineno-35-15" name="__codelineno-35-15"></a>
</span><span id="__span-35-16"><a id="__codelineno-35-16" name="__codelineno-35-16"></a>select make_timestamptz(2021, 6, 1, 12, 13, 19, &#39;Europe/Helsinki&#39;) at time zone make_interval(hours=&gt;4, mins=&gt;30);
</span><span id="__span-35-17"><a id="__codelineno-35-17" name="__codelineno-35-17"></a>
</span><span id="__span-35-18"><a id="__codelineno-35-18" name="__codelineno-35-18"></a>select timezone(make_interval(hours=&gt;4, mins=&gt;30), make_timestamptz(2021, 6, 1, 12, 13, 19, &#39;Europe/Helsinki&#39;));
</span></code></pre></div></td></tr></table></div>
<ul>
<li>在timestamptz 文本定义，或者函数make_timestamptz()的'timezone' 参数的文本中，显式指定UTC偏移量。
  时间戳文本可以是一个表达式。以下是一个示例：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-36-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1"></a>select (&#39;1984-04-01 13:00 &#39;||timezone_name())::timestamptz; 
</span></code></pre></div></td></tr></table></div>
<p>这里也有一种可能性，用嵌入的数字来解释文本值。试试如下示例：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-37-1">1</a></span>
<span class="normal"><a href="#__codelineno-37-2">2</a></span>
<span class="normal"><a href="#__codelineno-37-3">3</a></span>
<span class="normal"><a href="#__codelineno-37-4">4</a></span>
<span class="normal"><a href="#__codelineno-37-5">5</a></span>
<span class="normal"><a href="#__codelineno-37-6">6</a></span>
<span class="normal"><a href="#__codelineno-37-7">7</a></span>
<span class="normal"><a href="#__codelineno-37-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1"></a>set timezone = &#39;America/Los_Angeles&#39;;
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2"></a>\x on
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3"></a>with c as (select &#39;2008-07-01 13:00&#39; as ts)
</span><span id="__span-37-4"><a id="__codelineno-37-4" name="__codelineno-37-4"></a>select
</span><span id="__span-37-5"><a id="__codelineno-37-5" name="__codelineno-37-5"></a>  (select ((select ts from c)||&#39; America/Los_Angeles&#39;)::timestamptz) as &quot;Spelling &#39;LA&#39; timezone in text&quot;,
</span><span id="__span-37-6"><a id="__codelineno-37-6" name="__codelineno-37-6"></a>  (select ((select ts from c)||&#39; -07:00&#39;             )::timestamptz) as &quot;Attempting to specify the PDT offset&quot;,
</span><span id="__span-37-7"><a id="__codelineno-37-7" name="__codelineno-37-7"></a>  (select ((select ts from c)||&#39; Foo99&#39;              )::timestamptz) as &quot;Specifying &#39;Foo99&#39;&quot;;
</span><span id="__span-37-8"><a id="__codelineno-37-8" name="__codelineno-37-8"></a>\x off
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-38-1">1</a></span>
<span class="normal"><a href="#__codelineno-38-2">2</a></span>
<span class="normal"><a href="#__codelineno-38-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-38-1"><a id="__codelineno-38-1" name="__codelineno-38-1"></a>Spelling &#39;LA&#39; timezone in text          | 2008-07-01 13:00:00-07
</span><span id="__span-38-2"><a id="__codelineno-38-2" name="__codelineno-38-2"></a>Attempting to specify the PDT offset    | 2008-07-01 13:00:00-07
</span><span id="__span-38-3"><a id="__codelineno-38-3" name="__codelineno-38-3"></a>Specifying &#39;Foo99&#39;                   | 2008-07-05 09:00:00-07
</span></code></pre></div></td></tr></table></div>
<h2 id="timestamptimestamptz"><strong>timestamp与timestamptz</strong><a class="headerlink" href="#timestamptimestamptz" title="Permanent link">&para;</a></h2>
<p>普通timestamp 数据和timestamptz 数据都具有相同的内部表示。您可以将其想象为从参考时刻（1970年1月1日12:00，UTC）开始的实际秒数（以微秒为精度）。extract(epoch from t) 函数会返回这个数字，其中t是timestamp 或timestamptz 值。此外，对于这两种数据类型，结果与会话的当前时区设置无关。</p>
<h3 id="timestamp"><strong>timestamp</strong><a class="headerlink" href="#timestamp" title="Permanent link">&para;</a></h3>
<p>timestamp 值表示本地时间制度中某个时刻的日期和时间。无论是在创建timestamp 值时，还是在读取该值时，都不存在时区敏感性。因此，这样的值表示某个未指定位置的时刻，就像显示日期的钟表一样。您可以将时间戳值想象为从某个历元开始到当前时刻的微秒数。
因为没有时区敏感性，所以对夏令时制度也没有敏感性：每天从午夜（含）到下一个午夜（不含）。PostgresSQL和BSQL不支持闰秒，然而，当您指定timestamp 值时，允许将“24:00:00”作为时间值，将其作为一天中的时间组件。试着执行如下示例：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-39-1">1</a></span>
<span class="normal"><a href="#__codelineno-39-2">2</a></span>
<span class="normal"><a href="#__codelineno-39-3">3</a></span>
<span class="normal"><a href="#__codelineno-39-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-39-1"><a id="__codelineno-39-1" name="__codelineno-39-1"></a>select
</span><span id="__span-39-2"><a id="__codelineno-39-2" name="__codelineno-39-2"></a>  (&#39;2021-02-14 00:00:00.000000&#39;::timestamp)::text as &quot;starting midnight&quot;,
</span><span id="__span-39-3"><a id="__codelineno-39-3" name="__codelineno-39-3"></a>  (&#39;2021-02-14 23:59:59.999999&#39;::timestamp)::text as &quot;just before ending midnight&quot;,
</span><span id="__span-39-4"><a id="__codelineno-39-4" name="__codelineno-39-4"></a>  (&#39;2021-02-14 24:00:00.000000&#39;::timestamp)::text as &quot;ending midnight&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-40-1">1</a></span>
<span class="normal"><a href="#__codelineno-40-2">2</a></span>
<span class="normal"><a href="#__codelineno-40-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-40-1"><a id="__codelineno-40-1" name="__codelineno-40-1"></a>  starting midnight  | just before ending midnight |   ending midnight
</span><span id="__span-40-2"><a id="__codelineno-40-2" name="__codelineno-40-2"></a>---------------------+-----------------------------+---------------------
</span><span id="__span-40-3"><a id="__codelineno-40-3" name="__codelineno-40-3"></a> 2021-02-14 00:00:00 | 2021-02-14 23:59:59.999999  | 2021-02-15 00:00:00
</span></code></pre></div></td></tr></table></div>
<p>接下来，执行如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-41-1">1</a></span>
<span class="normal"><a href="#__codelineno-41-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-41-1"><a id="__codelineno-41-1" name="__codelineno-41-1"></a>select
</span><span id="__span-41-2"><a id="__codelineno-41-2" name="__codelineno-41-2"></a>  (&#39;2021-02-14 24:00:00&#39;::timestamp - &#39;2021-02-14 00:00:00&#39;::timestamp)::text as &quot;the interval&quot;;
</span></code></pre></div></td></tr></table></div>
<p>可以看到返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-42-1">1</a></span>
<span class="normal"><a href="#__codelineno-42-2">2</a></span>
<span class="normal"><a href="#__codelineno-42-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-42-1"><a id="__codelineno-42-1" name="__codelineno-42-1"></a> the interval
</span><span id="__span-42-2"><a id="__codelineno-42-2" name="__codelineno-42-2"></a>--------------
</span><span id="__span-42-3"><a id="__codelineno-42-3" name="__codelineno-42-3"></a> 1 day
</span></code></pre></div></td></tr></table></div>
<h3 id="timestamptz"><strong>timestamptz</strong><a class="headerlink" href="#timestamptz" title="Permanent link">&para;</a></h3>
<p>timestamptz 值表示绝对时间。因此，这样的值可以确定地表示为UTC时区中的当地时间，或者更仔细地说，表示为相对于UTC时间标准偏移量为“0秒”::interval 的当地时间。
尽管实际的timestamp 值和实际的timestamptz 值的表示是相同的，但由于值的元数据的差异，timestamp 值与timestamptz 的语义以及解释是不同的。</p>
<p>指定timestamptz 值时，还必须指定UTC偏移量。一旦记录了timestamptz 值（例如，在具有该数据类型的表列中），就不记得记录时的偏移量了。当传入值被标准化为UTC时，该信息将被完全消耗掉。</p>
<p>当timestamptz 值转换为要显示的文本值时，隐式使用::text类型转换，或显式使用to_char() 内置函数，转换会规范化日期-时间组件，以便显示相对于当前时区指定的UTC偏移量的本地时间。</p>
<p>UTC偏移量可以隐式指定（使用会话的当前时区设置），也可以在timestamptz 文本中显式指定，或者使用 at time zone运算符。此外，偏移量的指定可以是显式的，作为间隔值，或者隐式的使用时区的名称。当时区观察到夏令时时，其名称表示标准时间段和夏季时间段期间的不同偏移。</p>
<p>示例如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-43-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-43-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-43-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-43-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-43-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-43-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-43-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-43-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-43-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-43-10">10</a></span>
<span class="normal"><a href="#__codelineno-43-11">11</a></span>
<span class="normal"><a href="#__codelineno-43-12">12</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-43-1"><a id="__codelineno-43-1" name="__codelineno-43-1"></a>drop table if exists t cascade;
</span><span id="__span-43-2"><a id="__codelineno-43-2" name="__codelineno-43-2"></a>create table t(k int primary key, v timestamptz not null);
</span><span id="__span-43-3"><a id="__codelineno-43-3" name="__codelineno-43-3"></a>
</span><span id="__span-43-4"><a id="__codelineno-43-4" name="__codelineno-43-4"></a>-- This setting has no effect on the inserted value.
</span><span id="__span-43-5"><a id="__codelineno-43-5" name="__codelineno-43-5"></a>set timezone = &#39;Europe/Paris&#39;;
</span><span id="__span-43-6"><a id="__codelineno-43-6" name="__codelineno-43-6"></a>insert into t(k, v) values(1, &#39;2021-02-14 13:30:35+03:00&#39;::timestamptz);
</span><span id="__span-43-7"><a id="__codelineno-43-7" name="__codelineno-43-7"></a>
</span><span id="__span-43-8"><a id="__codelineno-43-8" name="__codelineno-43-8"></a>set timezone = &#39;America/Los_Angeles&#39;;
</span><span id="__span-43-9"><a id="__codelineno-43-9" name="__codelineno-43-9"></a>select v::text as &quot;timestamptz value&quot; from t where k = 1;
</span><span id="__span-43-10"><a id="__codelineno-43-10" name="__codelineno-43-10"></a>
</span><span id="__span-43-11"><a id="__codelineno-43-11" name="__codelineno-43-11"></a>set timezone = &#39;Asia/Shanghai&#39;;
</span><span id="__span-43-12"><a id="__codelineno-43-12" name="__codelineno-43-12"></a>select v::text as &quot;timestamptz value&quot; from t where k = 1;
</span></code></pre></div></td></tr></table></div>
<p>分别返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-44-1">1</a></span>
<span class="normal"><a href="#__codelineno-44-2">2</a></span>
<span class="normal"><a href="#__codelineno-44-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-44-1"><a id="__codelineno-44-1" name="__codelineno-44-1"></a>2021-02-14 02:30:35-08
</span><span id="__span-44-2"><a id="__codelineno-44-2" name="__codelineno-44-2"></a>
</span><span id="__span-44-3"><a id="__codelineno-44-3" name="__codelineno-44-3"></a>2021-02-14 18:30:35+08
</span></code></pre></div></td></tr></table></div>
<h3 id="_3"><strong>夏令时</strong><a class="headerlink" href="#_3" title="Permanent link">&para;</a></h3>
<p>如下演示了夏令时的示例：</p>
<p>美国承认夏令时。它将于2021年3月14日02:00在“America/Los_Angeles”区域开始。观看根据夏令时开始/结束时刻，自动调整的时钟（如智能手机上的时钟）的功能。从01:59:59到03:00:00。如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-45-1">1</a></span>
<span class="normal"><a href="#__codelineno-45-2">2</a></span>
<span class="normal"><a href="#__codelineno-45-3">3</a></span>
<span class="normal"><a href="#__codelineno-45-4">4</a></span>
<span class="normal"><a href="#__codelineno-45-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-45-1"><a id="__codelineno-45-1" name="__codelineno-45-1"></a>set timezone = &#39;America/Los_Angeles&#39;;
</span><span id="__span-45-2"><a id="__codelineno-45-2" name="__codelineno-45-2"></a>select
</span><span id="__span-45-3"><a id="__codelineno-45-3" name="__codelineno-45-3"></a>  &#39;2021-03-14 01:30:00 America/Los_Angeles&#39;::timestamptz as &quot;before&quot;,
</span><span id="__span-45-4"><a id="__codelineno-45-4" name="__codelineno-45-4"></a>  &#39;2021-03-14 02:30:00 America/Los_Angeles&#39;::timestamptz as &quot;wierd&quot;,
</span><span id="__span-45-5"><a id="__codelineno-45-5" name="__codelineno-45-5"></a>  &#39;2021-03-14 03:30:00 America/Los_Angeles&#39;::timestamptz as &quot;after&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-46-1">1</a></span>
<span class="normal"><a href="#__codelineno-46-2">2</a></span>
<span class="normal"><a href="#__codelineno-46-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-46-1"><a id="__codelineno-46-1" name="__codelineno-46-1"></a>         before         |         wierd          |         after
</span><span id="__span-46-2"><a id="__codelineno-46-2" name="__codelineno-46-2"></a>------------------------+------------------------+------------------------
</span><span id="__span-46-3"><a id="__codelineno-46-3" name="__codelineno-46-3"></a> 2021-03-14 01:30:00-08 | 2021-03-14 03:30:00-07 | 2021-03-14 03:30:00-07
</span></code></pre></div></td></tr></table></div>
<p>别名为“weird”的列中的值很怪异，因为“2021-03-14 02:30:00”不存在。</p>
<p>America/Los_Angeles时区的夏令时将于2021年11月7日02:00:00结束。它从“01:59:59”回落到“01:00:00”。这意味着，例如，11月7日的“01:30:00”是不明确的。如果你在11月6日星期六晚上给室友打电话，说你要到凌晨，可能是一点半左右才能回家，他们不会知道你的意思，因为时钟会把这个时间读两次。请试着执行如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-47-1">1</a></span>
<span class="normal"><a href="#__codelineno-47-2">2</a></span>
<span class="normal"><a href="#__codelineno-47-3">3</a></span>
<span class="normal"><a href="#__codelineno-47-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-47-1"><a id="__codelineno-47-1" name="__codelineno-47-1"></a>set timezone = &#39;America/Los_Angeles&#39;;
</span><span id="__span-47-2"><a id="__codelineno-47-2" name="__codelineno-47-2"></a>select
</span><span id="__span-47-3"><a id="__codelineno-47-3" name="__codelineno-47-3"></a>  to_char(&#39;2021-11-07 08:30:00 UTC&#39;::timestamptz, &#39;hh24:mi:ss TZ (OF)&#39;) as &quot;1st 1:30&quot;,
</span><span id="__span-47-4"><a id="__codelineno-47-4" name="__codelineno-47-4"></a>  to_char(&#39;2021-11-07 09:30:00 UTC&#39;::timestamptz, &#39;hh24:mi:ss TZ (OF)&#39;) as &quot;2nd 1:30&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-48-1">1</a></span>
<span class="normal"><a href="#__codelineno-48-2">2</a></span>
<span class="normal"><a href="#__codelineno-48-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-48-1"><a id="__codelineno-48-1" name="__codelineno-48-1"></a>      1st 1:30      |      2nd 1:30
</span><span id="__span-48-2"><a id="__codelineno-48-2" name="__codelineno-48-2"></a>----------------------------+------------------------
</span><span id="__span-48-3"><a id="__codelineno-48-3" name="__codelineno-48-3"></a> 01:30:00 PDT (-07)  | 01:30:00 PST (-08)
</span></code></pre></div></td></tr></table></div>
<p>因此，你必须告诉他们，你将以下面一种方式回来：</p>
<ul>
<li>或者在大约01:30 PDT（或者大约01:30PST）</li>
<li>或等效地在夏令时回退时刻前约01:30（或夏令时回退时刻后01:30）</li>
<li>或在约01:30UTC-7（或约01:30UTC-8）</li>
<li>或者甚至在大约八点半UTC（或者九点半UTC）。</li>
</ul>
<p>遵守夏令时的这种奇怪（但在逻辑上不可避免）的后果，意味着你也必须在另一个方向上小心。请试着执行如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-49-1">1</a></span>
<span class="normal"><a href="#__codelineno-49-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-49-1"><a id="__codelineno-49-1" name="__codelineno-49-1"></a>select
</span><span id="__span-49-2"><a id="__codelineno-49-2" name="__codelineno-49-2"></a>  to_char((&#39;2021-11-07 01:30:00 America/Los_Angeles&#39;::timestamptz) at time zone &#39;UTC&#39;, &#39;hh24:mi:ss&#39;) as &quot;Ambiguous&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-50-1">1</a></span>
<span class="normal"><a href="#__codelineno-50-2">2</a></span>
<span class="normal"><a href="#__codelineno-50-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-50-1"><a id="__codelineno-50-1" name="__codelineno-50-1"></a> Ambiguous
</span><span id="__span-50-2"><a id="__codelineno-50-2" name="__codelineno-50-2"></a>-----------
</span><span id="__span-50-3"><a id="__codelineno-50-3" name="__codelineno-50-3"></a> 09:30:00
</span></code></pre></div></td></tr></table></div>
<p>PostgreSQL（以及BSQL）通过约定来解决歧义：选择较晚的时刻。明确表达你的意思以避免歧义： </p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-51-1">1</a></span>
<span class="normal"><a href="#__codelineno-51-2">2</a></span>
<span class="normal"><a href="#__codelineno-51-3">3</a></span>
<span class="normal"><a href="#__codelineno-51-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-51-1"><a id="__codelineno-51-1" name="__codelineno-51-1"></a>set timezone = &#39;UTC&#39;;
</span><span id="__span-51-2"><a id="__codelineno-51-2" name="__codelineno-51-2"></a>select
</span><span id="__span-51-3"><a id="__codelineno-51-3" name="__codelineno-51-3"></a>  to_char(&#39;2021-11-07 01:30:00 -07:00&#39;::timestamptz, &#39;hh24:mi:ss TZ&#39;) as &quot;Before fallback&quot;,
</span><span id="__span-51-4"><a id="__codelineno-51-4" name="__codelineno-51-4"></a>  to_char(&#39;2021-11-07 01:30:00 -08:00&#39;::timestamptz, &#39;hh24:mi:ss TZ&#39;) as &quot;After fallback&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-52-1">1</a></span>
<span class="normal"><a href="#__codelineno-52-2">2</a></span>
<span class="normal"><a href="#__codelineno-52-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-52-1"><a id="__codelineno-52-1" name="__codelineno-52-1"></a> Before fallback | After fallback
</span><span id="__span-52-2"><a id="__codelineno-52-2" name="__codelineno-52-2"></a>--------------------+-------------------
</span><span id="__span-52-3"><a id="__codelineno-52-3" name="__codelineno-52-3"></a> 08:30:00 UTC  | 09:30:00 UTC
</span></code></pre></div></td></tr></table></div>
<p>或者，可以这样做：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-53-1">1</a></span>
<span class="normal"><a href="#__codelineno-53-2">2</a></span>
<span class="normal"><a href="#__codelineno-53-3">3</a></span>
<span class="normal"><a href="#__codelineno-53-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-53-1"><a id="__codelineno-53-1" name="__codelineno-53-1"></a>set timezone = &#39;America/Los_Angeles&#39;;
</span><span id="__span-53-2"><a id="__codelineno-53-2" name="__codelineno-53-2"></a>select
</span><span id="__span-53-3"><a id="__codelineno-53-3" name="__codelineno-53-3"></a>  to_char(&#39;2021-11-07 01:30:00 -07:00&#39;::timestamptz, &#39;hh24:mi:ss TZ&#39;) as &quot;Before fallback&quot;,
</span><span id="__span-53-4"><a id="__codelineno-53-4" name="__codelineno-53-4"></a>  to_char(&#39;2021-11-07 01:30:00 -08:00&#39;::timestamptz, &#39;hh24:mi:ss TZ&#39;) as &quot;After fallback&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-54-1">1</a></span>
<span class="normal"><a href="#__codelineno-54-2">2</a></span>
<span class="normal"><a href="#__codelineno-54-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-54-1"><a id="__codelineno-54-1" name="__codelineno-54-1"></a> Before fallback | After fallback
</span><span id="__span-54-2"><a id="__codelineno-54-2" name="__codelineno-54-2"></a>---------------------+----------------
</span><span id="__span-54-3"><a id="__codelineno-54-3" name="__codelineno-54-3"></a> 01:30:00 PDT  | 01:30:00 PST
</span></code></pre></div></td></tr></table></div>
<h2 id="interval"><strong>interval</strong><a class="headerlink" href="#interval" title="Permanent link">&para;</a></h2>
<p>interval值可以使用下列语法书写：</p>
<p>[@] quantity unit [quantity unit...] [direction]</p>
<p>其中quantity是一个数字（很可能是有符号的）； unit是毫秒、 millisecond、second、 minute、hour、day、 week、month、year、 decade、century、millennium 或者缩写或者这些单位的复数； direction可以是ago或者为空。At符号（@）是一个可选的噪声。不同单位的数量通过合适的符号计数被隐式地添加。ago对所有域求反。如果IntervalStyle被设置为postgres_verbose，该语法也被用于间隔输出。</p>
<p>日、小时、分钟和秒的数量可以不适用显式的单位标记指定。例如，'1 12:59:10'被读作'1 day 12 hours 59 min 10 sec'。同样，一个年和月的组合可以使用一个横线指定，例如'200-10'被读作'200年10个月'（这些较短的形式事实上是SQL标准唯一许可的形式，并且在IntervalStyle被设置为sql_standard时用于输出）。</p>
<p>间隔值也可以被写成 ISO 8601 时间间隔，使用该标准4.4.3.2小节的“带标志符的格式”或者4.4.3.3小节的“替代格式”。带标志符的格式看起来像这样：</p>
<p>P quantity unit [ quantity unit ...] [ T [ quantity unit ...]]</p>
<p>该串必须以一个P开始，并且可以包括一个引入当日时间单位的T。可用的单位缩写在下表中给出。单位可以被忽略，并且可以以任何顺序指定，但是小于一天的单位必须出现在T之后。特别地，M的含义取决于它出现在T之前还是之后。</p>
<p>ISO 8601 间隔单位缩写</p>
<table>
<thead>
<tr>
<th>缩写</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>Y</td>
<td>年</td>
</tr>
<tr>
<td>M</td>
<td>月（在日期部分中）</td>
</tr>
<tr>
<td>W</td>
<td>周</td>
</tr>
<tr>
<td>D</td>
<td>日</td>
</tr>
<tr>
<td>H</td>
<td>小时</td>
</tr>
<tr>
<td>M</td>
<td>分钟 (在时间部分中）</td>
</tr>
<tr>
<td>S</td>
<td>秒</td>
</tr>
</tbody>
</table>
<p>如果使用替代格式：</p>
<p>P [ years-months-days ] [ T hours:minutes:seconds ]</p>
<p>串必须以P开始，并且一个T分隔间隔的日期和时间部分。其值按照类似于 ISO 8601日期的数字给出。</p>
<p>在用一个域声明书写一个间隔常量时，或者为一个用域声明定义的间隔列赋予一个串时，对于为标记的量的解释依赖于域。例如INTERVAL '1' YEAR被解读成1年，而INTERVAL '1'表示1秒。同样，域声明允许的最后一个有效域“右边”的域值会被无声地丢弃掉。例如书写INTERVAL '1 day 2:03:04' HOUR TO MINUTE将会导致丢弃秒域，而不是日域。</p>
<p>根据SQL标准，一个间隔值的所有域都必须由相同的符号，这样一个领头的负号将会应用到所有域；例如在间隔文字'-1 2:03:04'中的负号会被应用于日、小时、分钟和秒部分。允许域具有不同的符号，并且在习惯上认为以文本表示的每个域具有独立的符号，因此在这个示例中小时、分钟和秒部分被认为是正值。如果IntervalStyle被设置为sql_standard，则一个领头的符号将被认为是应用于所有域（但是仅当没有额外符号出现）。否则将使用传统的解释。为了避免混淆，我们推荐在任何域为负值时为每一个域都附加一个显式的符号。</p>
<p>在冗长的输入格式中，以及在更紧凑输入格式的某些域中，域值可以有分数部分；例如'1.5 week'或'01:02:03.45'。这样的输入被转换为合适的月数、日数和秒数用于存储。当这样会导致月和日中的分数时，分数被加到低序域中，使用的转换因子是1月=30日和1日=24小时。例如，'1.5 month'会变成1月和15日。只有秒总是在输出时被显示为分数。</p>
<p>下表展示了一些有效interval输入的示例。</p>
<table>
<thead>
<tr>
<th>示例</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>1-2</td>
<td>SQL标准格式：1年2个月</td>
</tr>
<tr>
<td>3 4:05:06</td>
<td>SQL标准格式：3日4小时5分钟6秒</td>
</tr>
<tr>
<td>1 year 2 months 3 days 4 hours 5 minutes 6 seconds</td>
<td>1年2个月3日4小时5分钟6秒钟</td>
</tr>
<tr>
<td>P1Y2M3DT4H5M6S</td>
<td>带标志符的”ISO 8601 格式：含义同上</td>
</tr>
<tr>
<td>P0001-02-03T04:05:06</td>
<td>ISO 8601 的“替代格式”：含义同上</td>
</tr>
</tbody>
</table>
<h2 id="_4"><strong>时间/日期函数</strong><a class="headerlink" href="#_4" title="Permanent link">&para;</a></h2>
<h3 id="_5"><strong>创建函数</strong><a class="headerlink" href="#_5" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#_make_date()">make_date()</a></td>
<td>从年、月和日字段创建日期</td>
</tr>
<tr>
<td><a href="#_make_time()">make_time()</a></td>
<td>从小时、分钟和秒字段创建时间</td>
</tr>
<tr>
<td><a href="#_make_timestamp()">make_timestamp()</a></td>
<td>从年、月、日、小时、分钟和秒字段创建时间戳</td>
</tr>
<tr>
<td><a href="#_make_timestamptz()">make_timestamptz()</a></td>
<td>从年，月，日，小时，分钟和秒字段，结合时区创建时间戳；如果没有指定timezone，则使用当前时区</td>
</tr>
<tr>
<td><a href="#_to_timestamp()">to_timestamp()</a></td>
<td>将Unix纪元转换为带时区的时间戳(从1970-01-01 00:00:00+00开始的秒)</td>
</tr>
<tr>
<td><a href="#_make_interval()">make_interval()</a></td>
<td>从年、月、周、日、小时、分钟和秒字段创建时间间隔，每个字段默认为0</td>
</tr>
</tbody>
</table>
<h4 id="make_date">make_date()<a class="headerlink" href="#make_date" title="Permanent link">&para;</a></h4>
<p>目的：从年、月和日字段创建日期。</p>
<p>语法：</p>
<p>输入值:       year integer, month integer, day integer
返回值:      date</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-55-1">1</a></span>
<span class="normal"><a href="#__codelineno-55-2">2</a></span>
<span class="normal"><a href="#__codelineno-55-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-55-1"><a id="__codelineno-55-1" name="__codelineno-55-1"></a>with c as (
</span><span id="__span-55-2"><a id="__codelineno-55-2" name="__codelineno-55-2"></a>  select make_date(year=&gt;2019, month=&gt;4, day=&gt;22) as d)
</span><span id="__span-55-3"><a id="__codelineno-55-3" name="__codelineno-55-3"></a>select pg_typeof(d)::text as &quot;type&quot;, d::text from c;             
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-56-1">1</a></span>
<span class="normal"><a href="#__codelineno-56-2">2</a></span>
<span class="normal"><a href="#__codelineno-56-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-56-1"><a id="__codelineno-56-1" name="__codelineno-56-1"></a> type |     d
</span><span id="__span-56-2"><a id="__codelineno-56-2" name="__codelineno-56-2"></a>------+------------
</span><span id="__span-56-3"><a id="__codelineno-56-3" name="__codelineno-56-3"></a> date | 2019-04-22
</span></code></pre></div></td></tr></table></div>
<p>使用负值的年份来产生BC结果，例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-57-1">1</a></span>
<span class="normal"><a href="#__codelineno-57-2">2</a></span>
<span class="normal"><a href="#__codelineno-57-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-57-1"><a id="__codelineno-57-1" name="__codelineno-57-1"></a>with c as (
</span><span id="__span-57-2"><a id="__codelineno-57-2" name="__codelineno-57-2"></a>  select make_date(year=&gt;-10, month=&gt;1, day=&gt;31) as d)
</span><span id="__span-57-3"><a id="__codelineno-57-3" name="__codelineno-57-3"></a>select pg_typeof(d)::text as &quot;type&quot;, d::text from c;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-58-1">1</a></span>
<span class="normal"><a href="#__codelineno-58-2">2</a></span>
<span class="normal"><a href="#__codelineno-58-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-58-1"><a id="__codelineno-58-1" name="__codelineno-58-1"></a> type |       d
</span><span id="__span-58-2"><a id="__codelineno-58-2" name="__codelineno-58-2"></a>------+---------------
</span><span id="__span-58-3"><a id="__codelineno-58-3" name="__codelineno-58-3"></a> date | 0010-01-31 BC
</span></code></pre></div></td></tr></table></div>
<p>如果您指定了一个不存在的日期（例如零年或2月30日），则会出现以下错误： </p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-59-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-59-1"><a id="__codelineno-59-1" name="__codelineno-59-1"></a> ERROR:  date field value out of range
</span></code></pre></div></td></tr></table></div>
<h4 id="make_time">make_time()<a class="headerlink" href="#make_time" title="Permanent link">&para;</a></h4>
<p>目的：从小时、分钟和秒字段创建时间</p>
<p>语法：</p>
<p>输入值:      hour integer, min integer, sec double precision
返回值:      time without time zone</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-60-1">1</a></span>
<span class="normal"><a href="#__codelineno-60-2">2</a></span>
<span class="normal"><a href="#__codelineno-60-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-60-1"><a id="__codelineno-60-1" name="__codelineno-60-1"></a>with c as (
</span><span id="__span-60-2"><a id="__codelineno-60-2" name="__codelineno-60-2"></a>  select make_time(hour=&gt;13, min=&gt;25, sec=&gt;20.123456) as t)
</span><span id="__span-60-3"><a id="__codelineno-60-3" name="__codelineno-60-3"></a>select pg_typeof(t)::text as &quot;type&quot;, t::text from c;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-61-1">1</a></span>
<span class="normal"><a href="#__codelineno-61-2">2</a></span>
<span class="normal"><a href="#__codelineno-61-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-61-1"><a id="__codelineno-61-1" name="__codelineno-61-1"></a>          type       |        t
</span><span id="__span-61-2"><a id="__codelineno-61-2" name="__codelineno-61-2"></a>------------------------------+--------------------
</span><span id="__span-61-3"><a id="__codelineno-61-3" name="__codelineno-61-3"></a> time without time zone | 13:25:20.123456
</span></code></pre></div></td></tr></table></div>
<p>如果您指定了一个不存在的时间（例如，25:00:00），则会出现以下错误：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-62-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-62-1"><a id="__codelineno-62-1" name="__codelineno-62-1"></a>ERROR:  time field value out of range
</span></code></pre></div></td></tr></table></div>
<h4 id="make_timestamp">make_timestamp()<a class="headerlink" href="#make_timestamp" title="Permanent link">&para;</a></h4>
<p>目的：从年、月、日、小时、分钟和秒字段创建时间戳</p>
<p>语法：</p>
<p>输入值:      year integer, month integer, mday integer, hour integer, min integer, sec double precision
返回值:      timestamp without time zone</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-63-1">1</a></span>
<span class="normal"><a href="#__codelineno-63-2">2</a></span>
<span class="normal"><a href="#__codelineno-63-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-63-1"><a id="__codelineno-63-1" name="__codelineno-63-1"></a> with c as (
</span><span id="__span-63-2"><a id="__codelineno-63-2" name="__codelineno-63-2"></a>  select make_timestamp(year=&gt;2019, month=&gt;4, mday=&gt;22, hour=&gt;13, min=&gt;25, sec=&gt;20.123456) as ts)
</span><span id="__span-63-3"><a id="__codelineno-63-3" name="__codelineno-63-3"></a>select pg_typeof(ts)::text as &quot;type&quot;, ts::text from c;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-64-1">1</a></span>
<span class="normal"><a href="#__codelineno-64-2">2</a></span>
<span class="normal"><a href="#__codelineno-64-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-64-1"><a id="__codelineno-64-1" name="__codelineno-64-1"></a>            type         |             ts
</span><span id="__span-64-2"><a id="__codelineno-64-2" name="__codelineno-64-2"></a>-------------------------------------+----------------------------------
</span><span id="__span-64-3"><a id="__codelineno-64-3" name="__codelineno-64-3"></a> timestamp without time zone | 2019-04-22 13:25:20.123456
</span></code></pre></div></td></tr></table></div>
<h4 id="make_timestamptz">make_timestamptz()<a class="headerlink" href="#make_timestamptz" title="Permanent link">&para;</a></h4>
<p>目的：从年，月，日，小时，分钟和秒字段，结合时区创建时间戳；如果没有指定timezone，则使用当前时区</p>
<p>语法：</p>
<p>输入值:      year integer, month integer, mday integer, hour integer, min integer, sec double precision , [timezone text]</p>
<p>返回值:      timestamp with time zone</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-65-1">1</a></span>
<span class="normal"><a href="#__codelineno-65-2">2</a></span>
<span class="normal"><a href="#__codelineno-65-3">3</a></span>
<span class="normal"><a href="#__codelineno-65-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-65-1"><a id="__codelineno-65-1" name="__codelineno-65-1"></a>set timezone = &#39;UTC&#39;;
</span><span id="__span-65-2"><a id="__codelineno-65-2" name="__codelineno-65-2"></a>with c as (
</span><span id="__span-65-3"><a id="__codelineno-65-3" name="__codelineno-65-3"></a>  select make_timestamptz(year=&gt;2019, month=&gt;6, mday=&gt;22, hour=&gt;13, min=&gt;25, sec=&gt;20.123456, timezone=&gt;&#39;Europe/Helsinki&#39;) as tstz)
</span><span id="__span-65-4"><a id="__codelineno-65-4" name="__codelineno-65-4"></a>select pg_typeof(tstz)::text as &quot;type&quot;, tstz::text from c;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-66-1">1</a></span>
<span class="normal"><a href="#__codelineno-66-2">2</a></span>
<span class="normal"><a href="#__codelineno-66-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-66-1"><a id="__codelineno-66-1" name="__codelineno-66-1"></a>           type         |             tstz
</span><span id="__span-66-2"><a id="__codelineno-66-2" name="__codelineno-66-2"></a>-----------------------------------+----------------------------------------
</span><span id="__span-66-3"><a id="__codelineno-66-3" name="__codelineno-66-3"></a> timestamp with time zone  | 2019-06-22 10:25:20.123456+00
</span></code></pre></div></td></tr></table></div>
<h4 id="to_timestamp">to_timestamp()<a class="headerlink" href="#to_timestamp" title="Permanent link">&para;</a></h4>
<p>目的：将Unix纪元转换为带时区的时间戳(从1970-01-01 00:00:00+00开始的秒)</p>
<p>to_timestamp()函数有两个重载，都返回一个时间戳值。</p>
<p>语法：</p>
<p>输入值:       double precision
返回值:      timestamp with time zone</p>
<p>或者：</p>
<p>输入值:       text, text
返回值:      timestamp with time zone</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-67-1">1</a></span>
<span class="normal"><a href="#__codelineno-67-2">2</a></span>
<span class="normal"><a href="#__codelineno-67-3">3</a></span>
<span class="normal"><a href="#__codelineno-67-4">4</a></span>
<span class="normal"><a href="#__codelineno-67-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-67-1"><a id="__codelineno-67-1" name="__codelineno-67-1"></a>set timezone = &#39;UTC&#39;;
</span><span id="__span-67-2"><a id="__codelineno-67-2" name="__codelineno-67-2"></a>with c as (
</span><span id="__span-67-3"><a id="__codelineno-67-3" name="__codelineno-67-3"></a>  -- 100 days after the start of the Unix epoch.
</span><span id="__span-67-4"><a id="__codelineno-67-4" name="__codelineno-67-4"></a>  select to_timestamp((60*60*24*1000)::double precision) as t)
</span><span id="__span-67-5"><a id="__codelineno-67-5" name="__codelineno-67-5"></a>select pg_typeof(t)::text as &quot;type&quot;, t::text from c;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-68-1">1</a></span>
<span class="normal"><a href="#__codelineno-68-2">2</a></span>
<span class="normal"><a href="#__codelineno-68-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-68-1"><a id="__codelineno-68-1" name="__codelineno-68-1"></a>           type        |           t
</span><span id="__span-68-2"><a id="__codelineno-68-2" name="__codelineno-68-2"></a>---------------------------------+----------------------------
</span><span id="__span-68-3"><a id="__codelineno-68-3" name="__codelineno-68-3"></a> timestamp with time zone | 1972-09-27 00:00:00+00
</span></code></pre></div></td></tr></table></div>
<h4 id="make_interval">make_interval()<a class="headerlink" href="#make_interval" title="Permanent link">&para;</a></h4>
<p>目的：从年、月、周、日、小时、分钟和秒字段创建时间间隔，每个字段默认为0</p>
<p>语法：</p>
<p>输入值:        years integer, months integer, weeks integer, days integer, hours integer, mins integer, secs double precision
返回值:      interval         </p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-69-1">1</a></span>
<span class="normal"><a href="#__codelineno-69-2">2</a></span>
<span class="normal"><a href="#__codelineno-69-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-69-1"><a id="__codelineno-69-1" name="__codelineno-69-1"></a>with c as (
</span><span id="__span-69-2"><a id="__codelineno-69-2" name="__codelineno-69-2"></a>  select make_interval(secs=&gt;250000.123456) as i)
</span><span id="__span-69-3"><a id="__codelineno-69-3" name="__codelineno-69-3"></a>select pg_typeof(i)::text as &quot;type&quot;, i::text from c;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-70-1">1</a></span>
<span class="normal"><a href="#__codelineno-70-2">2</a></span>
<span class="normal"><a href="#__codelineno-70-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-70-1"><a id="__codelineno-70-1" name="__codelineno-70-1"></a>   type  |        i
</span><span id="__span-70-2"><a id="__codelineno-70-2" name="__codelineno-70-2"></a>------------+-----------------
</span><span id="__span-70-3"><a id="__codelineno-70-3" name="__codelineno-70-3"></a> interval | 69:26:40.123456
</span></code></pre></div></td></tr></table></div>
<h3 id="_6"><strong>操作函数</strong><a class="headerlink" href="#_6" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#_date_trunc()">date_trunc()</a></td>
<td>按照指定的粒度截断date_time值</td>
</tr>
<tr>
<td><a href="#_justify_days()">justify_days()</a></td>
<td>调整间隔，使得30天时间周期表示为月</td>
</tr>
<tr>
<td><a href="#_justify_hours()">justify_hours()</a></td>
<td>调整时间间隔，使得24小时时间周期表示为日</td>
</tr>
<tr>
<td><a href="#_justify_interval()">justify_interval()</a></td>
<td>使用 justify_days 和 justify_hours调整时间间隔</td>
</tr>
</tbody>
</table>
<h4 id="date_trunc">date_trunc()<a class="headerlink" href="#date_trunc" title="Permanent link">&para;</a></h4>
<p>目的：按照指定的粒度截断date_time值</p>
<p>date_trunc()函数有三个重载。</p>
<p>语法：</p>
<p>输入值:       text, interval
返回值:      interval     </p>
<p>或者</p>
<p>输入值:       text, timestamp with time zone
返回值:      interval     </p>
<p>或者</p>
<p>输入值:       text, timestamp without time zone
返回值:      interval     </p>
<p>第一个参数text的有效值为：
microseconds
milliseconds
second
minute
hour
day
week
month
quarter
year
decade
century
millennium</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-71-1">1</a></span>
<span class="normal"><a href="#__codelineno-71-2">2</a></span>
<span class="normal"><a href="#__codelineno-71-3">3</a></span>
<span class="normal"><a href="#__codelineno-71-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-71-1"><a id="__codelineno-71-1" name="__codelineno-71-1"></a>set timezone = &#39;UTC&#39;;
</span><span id="__span-71-2"><a id="__codelineno-71-2" name="__codelineno-71-2"></a>with c as (
</span><span id="__span-71-3"><a id="__codelineno-71-3" name="__codelineno-71-3"></a>  select date_trunc(&#39;year&#39;, &#39;2021-07-19&#39;::date) as v)
</span><span id="__span-71-4"><a id="__codelineno-71-4" name="__codelineno-71-4"></a>select pg_typeof(v)::text as &quot;type&quot;, v::text from c;
</span></code></pre></div></td></tr></table></div>
<p>返回如下信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-72-1">1</a></span>
<span class="normal"><a href="#__codelineno-72-2">2</a></span>
<span class="normal"><a href="#__codelineno-72-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-72-1"><a id="__codelineno-72-1" name="__codelineno-72-1"></a>           type        |           v
</span><span id="__span-72-2"><a id="__codelineno-72-2" name="__codelineno-72-2"></a>--------------------------------+--------------------------------
</span><span id="__span-72-3"><a id="__codelineno-72-3" name="__codelineno-72-3"></a> timestamp with time zone | 2021-01-01 00:00:00+00
</span></code></pre></div></td></tr></table></div>
<p>当输入值的类型为timestamp with time zone时。截断是针对特定时区进行的。 例如，截断为day，产生的值是 是该区域的午夜。 默认情况下，截断是在以下方面进行的 到当前的TimeZone设置，但在当前的 可以提供可选的time_zone参数。以指定不同的时区。 </p>
<p>当处理timestamp without time zone 或interval输入时，不能指定时区。 这些总是按表面值来处理。</p>
<p>示例 (假设当地时区为 America/New_York):</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-73-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-73-1"><a id="__codelineno-73-1" name="__codelineno-73-1"></a>select date_trunc(&#39;hour&#39;, TIMESTAMP &#39;2001-02-16 20:38:40&#39;);
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-74-1">1</a></span>
<span class="normal"><a href="#__codelineno-74-2">2</a></span>
<span class="normal"><a href="#__codelineno-74-3">3</a></span>
<span class="normal"><a href="#__codelineno-74-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-74-1"><a id="__codelineno-74-1" name="__codelineno-74-1"></a>     date_trunc      
</span><span id="__span-74-2"><a id="__codelineno-74-2" name="__codelineno-74-2"></a>---------------------------
</span><span id="__span-74-3"><a id="__codelineno-74-3" name="__codelineno-74-3"></a> 2001-02-16 20:00:00
</span><span id="__span-74-4"><a id="__codelineno-74-4" name="__codelineno-74-4"></a>select date_trunc(&#39;year&#39;, TIMESTAMP &#39;2001-02-16 20:38:40&#39;);
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-75-1">1</a></span>
<span class="normal"><a href="#__codelineno-75-2">2</a></span>
<span class="normal"><a href="#__codelineno-75-3">3</a></span>
<span class="normal"><a href="#__codelineno-75-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-75-1"><a id="__codelineno-75-1" name="__codelineno-75-1"></a>     date_trunc      
</span><span id="__span-75-2"><a id="__codelineno-75-2" name="__codelineno-75-2"></a>---------------------------
</span><span id="__span-75-3"><a id="__codelineno-75-3" name="__codelineno-75-3"></a> 2001-01-01 00:00:00
</span><span id="__span-75-4"><a id="__codelineno-75-4" name="__codelineno-75-4"></a>select date_trunc(&#39;day&#39;, TIMESTAMP WITH TIME ZONE &#39;2001-02-16 20:38:40+00&#39;);
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-76-1">1</a></span>
<span class="normal"><a href="#__codelineno-76-2">2</a></span>
<span class="normal"><a href="#__codelineno-76-3">3</a></span>
<span class="normal"><a href="#__codelineno-76-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-76-1"><a id="__codelineno-76-1" name="__codelineno-76-1"></a>       date_trunc       
</span><span id="__span-76-2"><a id="__codelineno-76-2" name="__codelineno-76-2"></a>------------------------------
</span><span id="__span-76-3"><a id="__codelineno-76-3" name="__codelineno-76-3"></a> 2001-02-16 00:00:00-05
</span><span id="__span-76-4"><a id="__codelineno-76-4" name="__codelineno-76-4"></a>select date_trunc(&#39;hour&#39;, INTERVAL &#39;3 days 02:47:33&#39;);
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-77-1">1</a></span>
<span class="normal"><a href="#__codelineno-77-2">2</a></span>
<span class="normal"><a href="#__codelineno-77-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-77-1"><a id="__codelineno-77-1" name="__codelineno-77-1"></a>   date_trunc    
</span><span id="__span-77-2"><a id="__codelineno-77-2" name="__codelineno-77-2"></a>---------------------
</span><span id="__span-77-3"><a id="__codelineno-77-3" name="__codelineno-77-3"></a> 3 days 02:00:00
</span></code></pre></div></td></tr></table></div>
<h4 id="justify_days">justify_days()<a class="headerlink" href="#justify_days" title="Permanent link">&para;</a></h4>
<p>目的：调整间隔，使得30天时间周期表示为月
justify_days()函数，通过减去30天周期的适当整数，来“标准化”[mm, dd, ss]表示的dd字段的值，从而得到的dd值小于30天（但不小于零）。使用一个30天周期与1个月相同的规则，将减去的30天周期转换为月，并添加到mm字段的值中。</p>
<p>语法：</p>
<p>输入值:       interval       <br />
返回值:      interval  </p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-78-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-78-1"><a id="__codelineno-78-1" name="__codelineno-78-1"></a>select justify_days(&#39;4 months 31 days&#39;::interval); 
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-79-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-79-1"><a id="__codelineno-79-1" name="__codelineno-79-1"></a>5 mons 1 day
</span></code></pre></div></td></tr></table></div>
<h4 id="justify_hours">justify_hours()<a class="headerlink" href="#justify_hours" title="Permanent link">&para;</a></h4>
<p>目的：调整时间间隔，使得24小时时间周期表示为日</p>
<p>语法：</p>
<p>输入值:       interval       <br />
返回值:      interval         </p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-80-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-80-1"><a id="__codelineno-80-1" name="__codelineno-80-1"></a>select justify_hours(&#39;4 days 25 hours&#39;::interval);
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-81-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-81-1"><a id="__codelineno-81-1" name="__codelineno-81-1"></a>5 days 01:00:00
</span></code></pre></div></td></tr></table></div>
<h4 id="justify_interval">justify_interval()<a class="headerlink" href="#justify_interval" title="Permanent link">&para;</a></h4>
<p>目的：使用 justify_days 和 justify_hours调整时间间隔；</p>
<p>语法：</p>
<p>输入值:       interval       <br />
返回值:      interval         </p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-82-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-82-1"><a id="__codelineno-82-1" name="__codelineno-82-1"></a>select justify_interval(&#39;4 months 31 days 25 hours&#39;::interval);
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-83-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-83-1"><a id="__codelineno-83-1" name="__codelineno-83-1"></a>5 mons 2 days 01:00:00
</span></code></pre></div></td></tr></table></div>
<h3 id="_7"><strong>当前日期/时间函数</strong><a class="headerlink" href="#_7" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#_current_date">current_date</a></td>
<td>当前日期(当前事务的开始）</td>
</tr>
<tr>
<td><a href="#_current_time()">current_time()</a></td>
<td>一天中的当前时间(当前事务的开始）</td>
</tr>
<tr>
<td><a href="#_current_timestamp">current_timestamp()</a></td>
<td>当前日期和时间(当前事务的开始)；</td>
</tr>
<tr>
<td><a href="#_localtime()">localtime()</a></td>
<td>一天中当前时间(当前事务的开始）</td>
</tr>
<tr>
<td><a href="#_localtimestamp()">localtimestamp()</a></td>
<td>当前日期和时间(当前事务的开始）</td>
</tr>
<tr>
<td><a href="#_transaction_timestamp()">transaction_timestamp()</a></td>
<td>当前日期和时间(当前事务的开始)</td>
</tr>
<tr>
<td><a href="#_now()">now()</a></td>
<td>当前日期和时间(当前事务的开始)；</td>
</tr>
<tr>
<td><a href="#_statement_timestamp()">statement_timestamp()</a></td>
<td>当前日期和时间(当前语句的开始)</td>
</tr>
<tr>
<td><a href="#_clock_timestamp()">clock_timestamp()</a></td>
<td>当前日期和时间（在语句执行期间变化）</td>
</tr>
<tr>
<td><a href="#_timeofday()">timeofday()</a></td>
<td>当前的日期和时间（类似 clock_timestamp, 但是采用 text 字符串）</td>
</tr>
</tbody>
</table>
<h4 id="current_date">current_date<a class="headerlink" href="#current_date" title="Permanent link">&para;</a></h4>
<p>目的：返回当前日期(当前事务的开始），它在同一事务内的连续调用中返回相同的值。 </p>
<p>语法：</p>
<p>返回值:      date</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-84-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-84-1"><a id="__codelineno-84-1" name="__codelineno-84-1"></a>select current_date;
</span></code></pre></div></td></tr></table></div>
<h4 id="current_time">current_time()<a class="headerlink" href="#current_time" title="Permanent link">&para;</a></h4>
<p>目的：一天中的当前时间(当前事务的开始），它在同一事务内的连续调用中返回相同的值，值带时区。可以有选择地接受一个精度参数，返回指定小数位的精度秒值。如果没有精度参数，结果将被给予所能得到的全部精度。</p>
<p>语法：</p>
<p>输入值:       precision
返回值:      timetz</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-85-1">1</a></span>
<span class="normal"><a href="#__codelineno-85-2">2</a></span>
<span class="normal"><a href="#__codelineno-85-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-85-1"><a id="__codelineno-85-1" name="__codelineno-85-1"></a>select current_time;
</span><span id="__span-85-2"><a id="__codelineno-85-2" name="__codelineno-85-2"></a>
</span><span id="__span-85-3"><a id="__codelineno-85-3" name="__codelineno-85-3"></a>select current_time(2);
</span></code></pre></div></td></tr></table></div>
<h4 id="current_timestamp">current_timestamp<a class="headerlink" href="#current_timestamp" title="Permanent link">&para;</a></h4>
<p>目的：当前日期和时间(当前事务的开始)，它在同一事务内的连续调用中返回相同的值，值带时区。可以有选择地接受一个精度参数，返回指定小数位的精度秒值。如果没有精度参数，结果将被给予所能得到的全部精度。</p>
<p>语法：</p>
<p>输入值:       precision
返回值:      timestamptz</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-86-1">1</a></span>
<span class="normal"><a href="#__codelineno-86-2">2</a></span>
<span class="normal"><a href="#__codelineno-86-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-86-1"><a id="__codelineno-86-1" name="__codelineno-86-1"></a>select current_timestamp;
</span><span id="__span-86-2"><a id="__codelineno-86-2" name="__codelineno-86-2"></a>
</span><span id="__span-86-3"><a id="__codelineno-86-3" name="__codelineno-86-3"></a>select current_timestamp(2);
</span></code></pre></div></td></tr></table></div>
<h4 id="localtime">localtime()<a class="headerlink" href="#localtime" title="Permanent link">&para;</a></h4>
<p>目的：返回一天中当前时间(当前事务的开始），它在同一事务内的连续调用中返回相同的值，值不带时区。可以有选择地接受一个精度参数，返回指定小数位的精度秒值。如果没有精度参数，结果将被给予所能得到的全部精度。</p>
<p>语法：</p>
<p>输入值:       precision
返回值:      time</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-87-1">1</a></span>
<span class="normal"><a href="#__codelineno-87-2">2</a></span>
<span class="normal"><a href="#__codelineno-87-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-87-1"><a id="__codelineno-87-1" name="__codelineno-87-1"></a>select localtime;
</span><span id="__span-87-2"><a id="__codelineno-87-2" name="__codelineno-87-2"></a>
</span><span id="__span-87-3"><a id="__codelineno-87-3" name="__codelineno-87-3"></a>select localtime(2);
</span></code></pre></div></td></tr></table></div>
<h4 id="localtimestamp">localtimestamp()<a class="headerlink" href="#localtimestamp" title="Permanent link">&para;</a></h4>
<p>目的：当前日期和时间(当前事务的开始），它在同一事务内的连续调用中返回相同的值，值不带时区。可以有选择地接受一个精度参数，返回指定小数位的精度秒值。如果没有精度参数，结果将被给予所能得到的全部精度。</p>
<p>语法：</p>
<p>输入值:       precision
返回值:      timestamp</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-88-1">1</a></span>
<span class="normal"><a href="#__codelineno-88-2">2</a></span>
<span class="normal"><a href="#__codelineno-88-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-88-1"><a id="__codelineno-88-1" name="__codelineno-88-1"></a>select localtimestamp;
</span><span id="__span-88-2"><a id="__codelineno-88-2" name="__codelineno-88-2"></a>
</span><span id="__span-88-3"><a id="__codelineno-88-3" name="__codelineno-88-3"></a>select localtimestamp(2);
</span></code></pre></div></td></tr></table></div>
<h4 id="transaction_timestamp">transaction_timestamp()<a class="headerlink" href="#transaction_timestamp" title="Permanent link">&para;</a></h4>
<p>目的：当前日期和时间(当前事务的开始)，它在同一事务内的连续调用中返回相同的值，值带时区。可以有选择地接受一个精度参数，返回指定小数位的精度秒值。如果没有精度参数，结果将被给予所能得到的全部精度。</p>
<p>transaction_timestamp()等价于CURRENT_TIMESTAMP</p>
<p>语法：</p>
<p>返回值:      timestamptz</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-89-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-89-1"><a id="__codelineno-89-1" name="__codelineno-89-1"></a>select transaction_timestamp();
</span></code></pre></div></td></tr></table></div>
<h4 id="now">now()<a class="headerlink" href="#now" title="Permanent link">&para;</a></h4>
<p>目的：当前日期和时间(当前事务的开始)，它在同一事务内的连续调用中返回相同的值，值带时区。可以有选择地接受一个精度参数，返回指定小数位的精度秒值。如果没有精度参数，结果将被给予所能得到的全部精度。</p>
<p>now()等效于transaction_timestamp()。</p>
<p>语法：</p>
<p>返回值:      timestamptz</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-90-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-90-1"><a id="__codelineno-90-1" name="__codelineno-90-1"></a>select now();
</span></code></pre></div></td></tr></table></div>
<h4 id="statement_timestamp">statement_timestamp()<a class="headerlink" href="#statement_timestamp" title="Permanent link">&para;</a></h4>
<p>目的：当前日期和时间(当前语句的开始)，返回当前语句的开始时刻（更准确的说是收到客户端最后一条命令的时间）。</p>
<p>语法：</p>
<p>返回值:      timestamptz</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-91-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-91-1"><a id="__codelineno-91-1" name="__codelineno-91-1"></a>select statement_timestamp();
</span></code></pre></div></td></tr></table></div>
<h4 id="clock_timestamp">clock_timestamp()<a class="headerlink" href="#clock_timestamp" title="Permanent link">&para;</a></h4>
<p>目的：当前日期和时间（在语句执行期间变化），clock_timestamp()返回真正的当前时间，值带时区，它的值甚至在同一条 SQL 命令中都会变化。</p>
<p>语法：</p>
<p>返回值:      timestamptz</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-92-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-92-1"><a id="__codelineno-92-1" name="__codelineno-92-1"></a>select clock_timestamp();
</span></code></pre></div></td></tr></table></div>
<h4 id="timeofday">timeofday()<a class="headerlink" href="#timeofday" title="Permanent link">&para;</a></h4>
<p>目的：和clock_timestamp()相似，timeofday()也返回真实的当前时间，但是它的结果是一个格式化的text串，而不是timestamp with time zone值。 </p>
<p>语法：</p>
<p>返回值:      text</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-93-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-93-1"><a id="__codelineno-93-1" name="__codelineno-93-1"></a>select timeofday();
</span></code></pre></div></td></tr></table></div>
<h3 id="_8"><strong>延时执行函数</strong><a class="headerlink" href="#_8" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#_pg_sleep()">pg_sleep()</a></td>
<td>使当前会话的进程休眠，直到过去给定的秒数。可以指定几分之一秒的延迟。</td>
</tr>
<tr>
<td><a href="#_pg_sleep_for()">pg_sleep_for()</a></td>
<td>允许将睡眠时间指定为时间间隔。</td>
</tr>
<tr>
<td><a href="#_pg_sleep_until()">pg_sleep_until()</a></td>
<td>用于需要特定的唤醒时间。</td>
</tr>
</tbody>
</table>
<h4 id="pg_sleep">pg_sleep()<a class="headerlink" href="#pg_sleep" title="Permanent link">&para;</a></h4>
<p>目的：使当前会话的进程休眠，直到过去给定的秒数。可以指定几分之一秒的延迟。</p>
<p>语法：</p>
<p>输入值:       double  precision
返回值:      void</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-94-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-94-1"><a id="__codelineno-94-1" name="__codelineno-94-1"></a>select pg_sleep(1.5);
</span></code></pre></div></td></tr></table></div>
<h4 id="pg_sleep_for">pg_sleep_for()<a class="headerlink" href="#pg_sleep_for" title="Permanent link">&para;</a></h4>
<p>目的：允许将睡眠时间指定为时间间隔。</p>
<p>语法：</p>
<p>输入值:       interval
返回值:      void</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-95-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-95-1"><a id="__codelineno-95-1" name="__codelineno-95-1"></a>select pg_sleep_for(&#39;5 minutes&#39;);
</span></code></pre></div></td></tr></table></div>
<h4 id="pg_sleep_until">pg_sleep_until()<a class="headerlink" href="#pg_sleep_until" title="Permanent link">&para;</a></h4>
<p>目的：用于需要特定的唤醒时间。</p>
<p>语法：</p>
<p>输入值:       timestamp with time zone 
返回值:      void</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-96-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-96-1"><a id="__codelineno-96-1" name="__codelineno-96-1"></a>select pg_sleep_until(&#39;tomorrow 03:00&#39;);
</span></code></pre></div></td></tr></table></div>
<h3 id="_9"><strong>其它函数和操作符</strong><a class="headerlink" href="#_9" title="Permanent link">&para;</a></h3>
<table>
<thead>
<tr>
<th>函数和操作符</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="#_isfinite()">isfinite()</a></td>
<td>测试有限日期，时间戳，时间间隔</td>
</tr>
<tr>
<td><a href="#_age()">age()</a></td>
<td>减去参数，生成一个使用年和月，而不是只用日的结果</td>
</tr>
<tr>
<td><a href="#_timezone()">timezone()</a></td>
<td>效果与在使用set时区指定所需时区后，从一种数据类型到另一种使用简单的类型转换相同</td>
</tr>
<tr>
<td><a href="#_extract() / date_part()">extract() / date_part()</a></td>
<td>从日期/时间值中抽取子域</td>
</tr>
<tr>
<td><a href="#_OVERLAPS">OVERLAPS</a></td>
<td>支持 SQL 操作符OVERLAPS：(start1, end1) OVERLAPS (start2, end2)(start1, length1) OVERLAPS (start2, length2) 这个表达式在两个时间域（用它们的端点定义）重叠的时候得到真，当它们不重叠时得到假。</td>
</tr>
</tbody>
</table>
<h4 id="isfinite">isfinite()<a class="headerlink" href="#isfinite" title="Permanent link">&para;</a></h4>
<p>目的：测试有限日期，时间戳，时间间隔</p>
<p>语法：</p>
<p>输入值:      abstime
 | date
 | interval 
| timestamp with time zone 
| timestamp without time zone
返回值:      boolean</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-97-1">1</a></span>
<span class="normal"><a href="#__codelineno-97-2">2</a></span>
<span class="normal"><a href="#__codelineno-97-3">3</a></span>
<span class="normal"><a href="#__codelineno-97-4">4</a></span>
<span class="normal"><a href="#__codelineno-97-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-97-1"><a id="__codelineno-97-1" name="__codelineno-97-1"></a>select isfinite(date &#39;2001-02-16&#39;);
</span><span id="__span-97-2"><a id="__codelineno-97-2" name="__codelineno-97-2"></a>
</span><span id="__span-97-3"><a id="__codelineno-97-3" name="__codelineno-97-3"></a>select isfinite(timestamp &#39;infinity&#39;);
</span><span id="__span-97-4"><a id="__codelineno-97-4" name="__codelineno-97-4"></a>
</span><span id="__span-97-5"><a id="__codelineno-97-5" name="__codelineno-97-5"></a>select isfinite(interval &#39;4 hours&#39;);
</span></code></pre></div></td></tr></table></div>
<h4 id="age">age()<a class="headerlink" href="#age" title="Permanent link">&para;</a></h4>
<p>目的：减去参数，生成一个使用年和月，而不是只用日的结果。</p>
<p>语法：</p>
<p>输入值:  timestamp without time zone, timestamp without time zone 
          |  timestamp with time zone, timestamp with time zone
          |  timestamp without time zone
          |  timestamp with time zone
返回值:  interval</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-98-1">1</a></span>
<span class="normal"><a href="#__codelineno-98-2">2</a></span>
<span class="normal"><a href="#__codelineno-98-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-98-1"><a id="__codelineno-98-1" name="__codelineno-98-1"></a>select  age(timestamp &#39;2001-04-10&#39;, timestamp &#39;1957-06-13&#39;);
</span><span id="__span-98-2"><a id="__codelineno-98-2" name="__codelineno-98-2"></a>
</span><span id="__span-98-3"><a id="__codelineno-98-3" name="__codelineno-98-3"></a>select age(timestamp &#39;1957-06-13&#39;);
</span></code></pre></div></td></tr></table></div>
<h4 id="timezone">timezone()<a class="headerlink" href="#timezone" title="Permanent link">&para;</a></h4>
<p>目的：效果与在使用set时区指定所需时区后，从一种数据类型到另一种使用简单的类型转换相同。</p>
<p>语法：</p>
<p>输入值:  interval, time with time zone<br />
返回值:  time with time zone</p>
<p>或者</p>
<p>输入值:  interval, timestamp with time zone<br />
返回值:  timestamp without time zone</p>
<p>或者</p>
<p>输入值:  interval, timestamp without time zone<br />
返回值:  timestamp with time zone</p>
<p>或者</p>
<p>输入值:  text, time with time zone<br />
返回值:  time with time zone</p>
<p>或者</p>
<p>输入值:  text, timestamp with time zone<br />
返回值:  timestamp without time zone</p>
<p>或者</p>
<p>输入值:  text, timestamp without time zone<br />
返回值:  timestamp with time zone</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-99-1">1</a></span>
<span class="normal"><a href="#__codelineno-99-2">2</a></span>
<span class="normal"><a href="#__codelineno-99-3">3</a></span>
<span class="normal"><a href="#__codelineno-99-4">4</a></span>
<span class="normal"><a href="#__codelineno-99-5">5</a></span>
<span class="normal"><a href="#__codelineno-99-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-99-1"><a id="__codelineno-99-1" name="__codelineno-99-1"></a>with c as (
</span><span id="__span-99-2"><a id="__codelineno-99-2" name="__codelineno-99-2"></a>  select &#39;2021-09-22 13:17:53.123456 Europe/Helsinki&#39;::timestamptz as tstz)
</span><span id="__span-99-3"><a id="__codelineno-99-3" name="__codelineno-99-3"></a>select
</span><span id="__span-99-4"><a id="__codelineno-99-4" name="__codelineno-99-4"></a>  (timezone(&#39;UTC&#39;,           tstz) = tstz at time zone &#39;UTC&#39;          )::text as &quot;with timezone given as text&quot;,
</span><span id="__span-99-5"><a id="__codelineno-99-5" name="__codelineno-99-5"></a>  (timezone(make_interval(), tstz) = tstz at time zone make_interval())::text as &quot;with timezone given as interval&quot;
</span><span id="__span-99-6"><a id="__codelineno-99-6" name="__codelineno-99-6"></a>from c;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-100-1">1</a></span>
<span class="normal"><a href="#__codelineno-100-2">2</a></span>
<span class="normal"><a href="#__codelineno-100-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-100-1"><a id="__codelineno-100-1" name="__codelineno-100-1"></a> with timezone given as text | with timezone given as interval
</span><span id="__span-100-2"><a id="__codelineno-100-2" name="__codelineno-100-2"></a>-----------------------------------+---------------------------------------
</span><span id="__span-100-3"><a id="__codelineno-100-3" name="__codelineno-100-3"></a> true                   | true
</span></code></pre></div></td></tr></table></div>
<h4 id="extract-date_part">extract() / date_part()<a class="headerlink" href="#extract-date_part" title="Permanent link">&para;</a></h4>
<p>目的：从日期/时间值中抽取子域，主要的用途是做计算性处理。对于用于显示的日期/时间值格式化，date_part函数等价于SQL标准函数extract。
两者使用语法为：</p>
<p>date_part('field', source)</p>
<p>EXTRACT(field FROM source)</p>
<p>source必须是一个类型 timestamp、time或interval的值表达式（类型为date的表达式将被造型为 timestamp，并且因此也可以被同样使用）。field是一个标识符或者字符串，它指定从源值中抽取的域。extract函数返回类型为double precision的值。有效的域名字见下表所示∶</p>
<table>
<thead>
<tr>
<th>域名</th>
<th>描述及示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>century</td>
<td>世纪select EXTRACT(CENTURY FROM TIMESTAMP '2000-12-16 12:21:13');</td>
</tr>
<tr>
<td>day</td>
<td>对于timestamp值，是（月份）里的日域（1–31）；对于interval值，是日数select EXTRACT(DAY FROM TIMESTAMP '2001-02-16 20:38:40');select EXTRACT(DAY FROM INTERVAL '40 days 1 minute');</td>
</tr>
<tr>
<td>decade</td>
<td>年份域除以10select EXTRACT(DECADE FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>dow</td>
<td>一周中的日，从周日（0）到周六（6）select EXTRACT(DOW FROM TIMESTAMP '2001-02-16 20:38:40');请注意，extract的一周中的日和to_char(..., 'D')函数不同。</td>
</tr>
<tr>
<td>doy</td>
<td>一年的第几天（1–365/366）select EXTRACT(DOY FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>epoch</td>
<td>对于timestamp with time zone值， 是自 1970-01-01 00:00:00 UTC 以来的秒数（结果可能是负数）； 对于date and timestamp值，是自本地时间 1970-01-01 00:00:00 以来的描述；对于interval值，它是时间间隔的总秒数。select EXTRACT(EPOCH FROM TIMESTAMP WITH TIME ZONE '2001-02-16 20:38:40.12-08');select EXTRACT(EPOCH FROM INTERVAL '5 days 3 hours');</td>
</tr>
<tr>
<td>hour</td>
<td>小时域（0–23）select EXTRACT(HOUR FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>isodow</td>
<td>一周中的日，从周一（1）到周日（7）select EXTRACT(ISODOW FROM TIMESTAMP '2001-02-18 20:38:40');除了周日，这和dow相同。这符合ISO 8601 中一周中的日的编号。</td>
</tr>
<tr>
<td>isoyear</td>
<td>日期所落在的ISO 8601 周编号的年（不适用于间隔），每一个ISO 8601 周编号的年都开始于包含1月4日的那一周的周一select EXTRACT(ISOYEAR FROM DATE '2006-01-01');select EXTRACT(ISOYEAR FROM DATE '2006-01-02');</td>
</tr>
<tr>
<td>microseconds</td>
<td>秒域，包括小数部分，乘以 1,000,000。请注意它包括全部的秒select EXTRACT(MICROSECONDS FROM TIME '17:12:28.5');</td>
</tr>
<tr>
<td>millennium</td>
<td>千年select EXTRACT(MILLENNIUM FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>milliseconds</td>
<td>秒域，包括小数部分，乘以 1000。请注意它包括完整的秒。select EXTRACT(MILLISECONDS FROM TIME '17:12:28.5');</td>
</tr>
<tr>
<td>minute</td>
<td>分钟域（0–59）select EXTRACT(MINUTE FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>month</td>
<td>对于timestamp值，它是一年里的月份数（1–12）； 对于interval值，它是月的数目，然后对 12 取模（0–11）select EXTRACT(MONTH FROM TIMESTAMP '2001-02-16 20:38:40');select EXTRACT(MONTH FROM INTERVAL '2 years 13 months');</td>
</tr>
<tr>
<td>quarter</td>
<td>该天所在的该年的季度（1–4）select EXTRACT(QUARTER FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>second</td>
<td>秒，包括任何小数秒。select EXTRACT(SECOND FROM TIMESTAMP '2001-02-16 20:38:40');select EXTRACT(SECOND FROM TIME '17:12:28.5');</td>
</tr>
<tr>
<td>timezone</td>
<td>与 UTC 的时区偏移，以秒记。正数对应 UTC 东边的时区，负数对应 UTC 西边的时区。</td>
</tr>
<tr>
<td>timezone_hour</td>
<td>时区偏移的小时部分。</td>
</tr>
<tr>
<td>timezone_minute</td>
<td>时区偏移的分钟部分。</td>
</tr>
<tr>
<td>week</td>
<td>该天在所在的ISO 8601 周编号的年份里是第几周。根据定义， 一年的第一周包含该年的 1月 4 日并且 ISO 周从星期一开始。换句话说，一年的第一个星期四在第一周。在 ISO 周编号系统中，早的 1 月的日期可能位于前一年的第五十二或者第五十三周，而迟的 12 月的日期可能位于下一年的第一周。例如， 2005-01-01位于 2004 年的第五十三周，并且2006-01-01位于 2005 年的第五十二周，而2012-12-31位于 2013 年的第一周。我们推荐把isoyear域和week一起使用来得到一致的结果。select EXTRACT(WEEK FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>year</td>
<td>年份域。要记住这里没有0 AD，所以从AD年里抽取BC年应该小心处理。select EXTRACT(YEAR FROM TIMESTAMP '2001-02-16 20:38:40');</td>
</tr>
<tr>
<td>julian</td>
<td>与日期或时间戳[tz]值相对应的儒略日期（间隔值不支持）。不是本地午夜的timestamp[tz]值会产生一个分数值。</td>
</tr>
</tbody>
</table>
<h4 id="overlaps">OVERLAPS<a class="headerlink" href="#overlaps" title="Permanent link">&para;</a></h4>
<p>支持 SQL 操作符OVERLAPS：</p>
<p>(start1, end1) OVERLAPS (start2, end2)
(start1, length1) OVERLAPS (start2, length2)</p>
<p>这个表达式在两个时间域（用它们的端点定义）重叠的时候得到真，当它们不重叠时得到假。端点可以用一对日期、时间或者时间戳来指定；或者是用一个后面跟着一个间隔的日期、时间或时间戳来指定。当一对值被提供时，起点或终点都可以被写在前面，OVERLAPS会自动地把较早的值作为起点。每一个时间段被认为是表示半开的间隔start &lt;= time &lt; end，除非start和end相等，这种情况下它表示单个时间实例。例如这表示两个只有一个共同端点的时间段不重叠。</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-101-1">1</a></span>
<span class="normal"><a href="#__codelineno-101-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-101-1"><a id="__codelineno-101-1" name="__codelineno-101-1"></a>select (DATE &#39;2001-02-16&#39;, DATE &#39;2001-12-21&#39;) OVERLAPS
</span><span id="__span-101-2"><a id="__codelineno-101-2" name="__codelineno-101-2"></a>       (DATE &#39;2001-10-30&#39;, DATE &#39;2002-10-30&#39;);
</span></code></pre></div></td></tr></table></div>
<h2 id="_10"><strong>格式化函数</strong><a class="headerlink" href="#_10" title="Permanent link">&para;</a></h2>
<p>本小结介绍所有日期时间的格式化功能，包括日期时间值格式化到文本值，和文本值格式化到日期时间值。</p>
<h3 id="_11"><strong>格式化函数</strong><a class="headerlink" href="#_11" title="Permanent link">&para;</a></h3>
<p>格式化函数提供一套强大的工具用于把各种数据类型 （日期/时间、整数、浮点、数字） 转换成格式化的字符串，以及反过来从格式化的字符串转换成指定的数据类型。下表列出了这些函数。
这些函数都遵循一个公共的调用规范： 第一个参数是待格式化的值，而第二个是一个定义输出或输入格式的模板。</p>
<table>
<thead>
<tr>
<th>函数</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>to_char()</td>
<td>根据给定的格式将时间戳，时间间隔转换为字符串。</td>
</tr>
<tr>
<td>to_date()</td>
<td>根据给定的格式将字符串转换为日期。</td>
</tr>
<tr>
<td>to_timestamp()</td>
<td>根据给定的格式将字符串转换为时间戳。</td>
</tr>
</tbody>
</table>
<h4 id="to_char">to_char()<a class="headerlink" href="#to_char" title="Permanent link">&para;</a></h4>
<p>目的：根据给定的格式将时间戳，时间间隔转换为字符串。to_char函数的有关时间，日期格式化的重载函数语法如下：</p>
<p>语法：</p>
<p>输入值:  interval, text<br />
返回值:  text</p>
<p>或者</p>
<p>输入值:  timestamp with time zone, text<br />
返回值:  text</p>
<p>或者</p>
<p>输入值:  timestamp without time zone, text<br />
返回值:  text</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-102-1">1</a></span>
<span class="normal"><a href="#__codelineno-102-2">2</a></span>
<span class="normal"><a href="#__codelineno-102-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-102-1"><a id="__codelineno-102-1" name="__codelineno-102-1"></a>select to_char(timestamp &#39;2002-04-20 17:31:12.66&#39;, &#39;HH12:MI:SS&#39;);
</span><span id="__span-102-2"><a id="__codelineno-102-2" name="__codelineno-102-2"></a>
</span><span id="__span-102-3"><a id="__codelineno-102-3" name="__codelineno-102-3"></a>select to_char(interval &#39;15h 2m 12s&#39;, &#39;HH24:MI:SS&#39;);
</span></code></pre></div></td></tr></table></div>
<p>请注意，没有用于将日期值或时间值转换为文本值的重载。</p>
<h4 id="to_date">to_date()<a class="headerlink" href="#to_date" title="Permanent link">&para;</a></h4>
<p>目的：根据给定的格式将字符串转换为日期。</p>
<p>语法：</p>
<p>输入值:  text, text
返回值:  date  </p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-103-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-103-1"><a id="__codelineno-103-1" name="__codelineno-103-1"></a>select to_date(&#39;05 Dec 2000&#39;, &#39;DD Mon YYYY&#39;);
</span></code></pre></div></td></tr></table></div>
<h4 id="to_timestamp_1">to_timestamp()<a class="headerlink" href="#to_timestamp_1" title="Permanent link">&para;</a></h4>
<p>目的：根据给定的格式将字符串转换为时间戳。</p>
<p>语法：</p>
<p>输入值:  text, text 
返回值:  timestamp with time zone</p>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-104-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-104-1"><a id="__codelineno-104-1" name="__codelineno-104-1"></a>select to_timestamp(&#39;05 Dec 2000&#39;, &#39;DD Mon YYYY&#39;);
</span></code></pre></div></td></tr></table></div>
<h3 id="-"><strong>日期-时间模板模式</strong><a class="headerlink" href="#-" title="Permanent link">&para;</a></h3>
<p>下表列出了支持的不同模板模式。</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>HH</td>
<td>一天中的小时(01–12)</td>
</tr>
<tr>
<td>HH12</td>
<td>一天中的小时(01–12)</td>
</tr>
<tr>
<td>HH24</td>
<td>一天中的小时 (00–23)</td>
</tr>
<tr>
<td>MI</td>
<td>分钟 (00–59)</td>
</tr>
<tr>
<td>SS</td>
<td>秒 (00–59)</td>
</tr>
<tr>
<td>MS</td>
<td>毫秒 (000–999)</td>
</tr>
<tr>
<td>US</td>
<td>微秒 (000000–999999)</td>
</tr>
<tr>
<td>SSSS</td>
<td>午夜后的秒 (0–86399)</td>
</tr>
<tr>
<td>AM, am, PM, pm</td>
<td>正午指示器（不带句号）</td>
</tr>
<tr>
<td>A.M., a.m., P.M. , p.m.</td>
<td>正午指示器（带句号）</td>
</tr>
<tr>
<td>Y,YYY</td>
<td>带逗号的年（4 位或者更多位） with comma</td>
</tr>
<tr>
<td>YYYY</td>
<td>年（4 位或者更多位）</td>
</tr>
<tr>
<td>YYY</td>
<td>年的最后 3 位数字</td>
</tr>
<tr>
<td>YY</td>
<td>年的最后 2 位数字</td>
</tr>
<tr>
<td>Y</td>
<td>年的最后 1 位数字</td>
</tr>
<tr>
<td>IYYY</td>
<td>ISO 8601 周编号方式的年（4 位或更多位）</td>
</tr>
<tr>
<td>IYY</td>
<td>ISO 8601 周编号方式的年的最后 3 位数字</td>
</tr>
<tr>
<td>IY</td>
<td>ISO 8601 周编号方式的年的最后 2 位数字</td>
</tr>
<tr>
<td>I</td>
<td>ISO 8601 周编号方式的年的最后 1 位数字</td>
</tr>
<tr>
<td>BC, bc, AD 或 ad</td>
<td>纪元指示器（不带句号）</td>
</tr>
<tr>
<td>B.C., b.c., A.D. 或 a.d.</td>
<td>纪元指示器（带句号）</td>
</tr>
<tr>
<td>MONTH</td>
<td>全大写形式的月名（空格补齐到 9 字符）</td>
</tr>
<tr>
<td>Month</td>
<td>全首字母大写形式的月名（空格补齐到 9 字符）</td>
</tr>
<tr>
<td>month</td>
<td>全小写形式的月名（空格补齐到 9 字符）</td>
</tr>
<tr>
<td>MON</td>
<td>简写大写形式的月名（英文 3 字符，本地化长度可变）</td>
</tr>
<tr>
<td>Mon</td>
<td>简写首字母大写形式的月名（英文 3 字符，本地化长度可变）</td>
</tr>
<tr>
<td>mon</td>
<td>简写的小写形式的月名（英文 3 字符，本地化长度可变）</td>
</tr>
<tr>
<td>MM</td>
<td>月编号 (01–12)</td>
</tr>
<tr>
<td>DAY</td>
<td>全大写形式的日名（空格补齐到 9 字符）</td>
</tr>
<tr>
<td>Day</td>
<td>全首字母大写形式的日名（空格补齐到 9 字符）</td>
</tr>
<tr>
<td>day</td>
<td>全小写形式的日名（空格补齐到 9 字符）</td>
</tr>
<tr>
<td>DY</td>
<td>简写大写形式的日名（英语 3 字符，本地化长度可变）</td>
</tr>
<tr>
<td>Dy</td>
<td>简写首字母大写形式的日名（英语 3 字符，本地化长度可变）</td>
</tr>
<tr>
<td>dy</td>
<td>简写的小写形式的日名（英语 3 字符，本地化长度可变）</td>
</tr>
<tr>
<td>DDD</td>
<td>一年中的日(001–366)</td>
</tr>
<tr>
<td>IDDD</td>
<td>ISO 8601周编号方式的年中的日（001–371;年的第1日时第一个ISO周的周一）</td>
</tr>
<tr>
<td>DD</td>
<td>月中的日 (01–31)</td>
</tr>
<tr>
<td>D</td>
<td>周中的日，周日 (1) 到周六 (7)</td>
</tr>
<tr>
<td>ID</td>
<td>周中的 ISO 8601 日，周一 (1) 到周日 (7)</td>
</tr>
<tr>
<td>W</td>
<td>月中的周 (1–5) （第一周从该月的第一天开始）</td>
</tr>
<tr>
<td>WW</td>
<td>年中的周数 (1–53) （第一周从该年的第一天开始）</td>
</tr>
<tr>
<td>IW</td>
<td>ISO 8601周编号方式的年中的周数(01–53; 新的一年的第一个周四在第一周)</td>
</tr>
<tr>
<td>CC</td>
<td>世纪（2 位数）（21 世纪开始于 2001-01-01）</td>
</tr>
<tr>
<td>J</td>
<td>儒略日（从午夜 UTC 的公元前 4714 年 11 月 24 日开始的整数日数）</td>
</tr>
<tr>
<td>Q</td>
<td>季度</td>
</tr>
<tr>
<td>RM</td>
<td>大写形式的罗马计数法的月 (I–XII; I=一月)</td>
</tr>
<tr>
<td>rm</td>
<td>小写形式的罗马计数法的月 (i–xii; i=一月)</td>
</tr>
<tr>
<td>TZ</td>
<td>大写形式的时区缩写（仅在to_char中支持）</td>
</tr>
<tr>
<td>tz</td>
<td>小写形式的时区缩写（仅在to_char中支持）</td>
</tr>
<tr>
<td>TZH</td>
<td>时区的小时</td>
</tr>
<tr>
<td>TZM</td>
<td>时区的分钟</td>
</tr>
<tr>
<td>OF</td>
<td>从UTC开始的时区偏移（仅在to_char中支持）</td>
</tr>
</tbody>
</table>
<p>修饰语可以被应用于模板模式来修改它们的行为。例如，FMMonth就是带着FM修饰语的Month模式。下表展示了可用于日期/时间格式化的修饰语模式。</p>
<table>
<thead>
<tr>
<th>修饰语</th>
<th>描述</th>
<th>示例</th>
</tr>
</thead>
<tbody>
<tr>
<td>FM prefix</td>
<td>填充模式（抑制前导零和填充的空格）</td>
<td>FMMonth</td>
</tr>
<tr>
<td>TM prefix</td>
<td>翻译模式（基于lc_time使用本地化的日和月名）</td>
<td>TMMonth</td>
</tr>
<tr>
<td>TH suffix</td>
<td>大写形式的序数后缀</td>
<td>DDTH, e.g., 12TH</td>
</tr>
<tr>
<td>th suffix</td>
<td>小写形式的序数后缀</td>
<td>DDth, e.g., 12<sup>th</sup></td>
</tr>
<tr>
<td>FX prefix</td>
<td>固定的格式化全局选项</td>
<td>FX Month DD Day</td>
</tr>
</tbody>
</table>
<p>日期/时间格式化的使用须知：</p>
<ul>
<li>FM修饰符
  FM抑制前导零和尾随空格，否则这些空格将被添加，以使输出为固定宽度。例如：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-105-1">1</a></span>
<span class="normal"><a href="#__codelineno-105-2">2</a></span>
<span class="normal"><a href="#__codelineno-105-3">3</a></span>
<span class="normal"><a href="#__codelineno-105-4">4</a></span>
<span class="normal"><a href="#__codelineno-105-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-105-1"><a id="__codelineno-105-1" name="__codelineno-105-1"></a>with c as (select &#39;0020-05-03 BC&#39;::timestamp as t)
</span><span id="__span-105-2"><a id="__codelineno-105-2" name="__codelineno-105-2"></a>  select
</span><span id="__span-105-3"><a id="__codelineno-105-3" name="__codelineno-105-3"></a>    to_char(t, &#39;MMth &quot;month (&quot;Month&quot;)&quot;, DDth &quot;day&quot;, YYYY AD&#39;)          as &quot;plain&quot;,
</span><span id="__span-105-4"><a id="__codelineno-105-4" name="__codelineno-105-4"></a>    to_char(t, &#39;FMMMth &quot;month (&quot;FMMonth&quot;)&quot;, FMDDth &quot;day&quot;, FMYYYY AD&#39;)  as &quot;using FM&quot;
</span><span id="__span-105-5"><a id="__codelineno-105-5" name="__codelineno-105-5"></a>from c;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-106-1">1</a></span>
<span class="normal"><a href="#__codelineno-106-2">2</a></span>
<span class="normal"><a href="#__codelineno-106-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-106-1"><a id="__codelineno-106-1" name="__codelineno-106-1"></a>              plain                   |            using FM
</span><span id="__span-106-2"><a id="__codelineno-106-2" name="__codelineno-106-2"></a>-------------------------------------------------------+-----------------------------------------
</span><span id="__span-106-3"><a id="__codelineno-106-3" name="__codelineno-106-3"></a>05th month (May      ), 03rd day, 0020 BC | 5th month (May), 3rd day, 20 BC
</span></code></pre></div></td></tr></table></div>
<ul>
<li>TM修饰符
  TM修饰符仅仅影响使用to_char()，以文本展示完整和缩写的日期和月份名称，因为这些字段不会影响到日期时间的结果值，所以to_date()和to_timestamp()会忽略TM。TM不仅决定了用于日、月名称和缩写的国家语言，而且还具有抑制尾随空格的副作用。请注意，TM对序数后缀的呈现方式没有影响。例如：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-107-1">1</a></span>
<span class="normal"><a href="#__codelineno-107-2">2</a></span>
<span class="normal"><a href="#__codelineno-107-3">3</a></span>
<span class="normal"><a href="#__codelineno-107-4">4</a></span>
<span class="normal"><a href="#__codelineno-107-5">5</a></span>
<span class="normal"><a href="#__codelineno-107-6">6</a></span>
<span class="normal"><a href="#__codelineno-107-7">7</a></span>
<span class="normal"><a href="#__codelineno-107-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-107-1"><a id="__codelineno-107-1" name="__codelineno-107-1"></a>deallocate all;
</span><span id="__span-107-2"><a id="__codelineno-107-2" name="__codelineno-107-2"></a>prepare stmt as
</span><span id="__span-107-3"><a id="__codelineno-107-3" name="__codelineno-107-3"></a>select
</span><span id="__span-107-4"><a id="__codelineno-107-4" name="__codelineno-107-4"></a>  to_char(&#39;2021-02-01&#39;::timestamp, &#39;Day, ddth Month, y,yyy&#39;) as &quot;plain&quot;,
</span><span id="__span-107-5"><a id="__codelineno-107-5" name="__codelineno-107-5"></a>  to_char(&#39;2021-02-01&#39;::timestamp, &#39;TMDay, ddth TMMonth, y,yyy&#39;) as &quot;with TM&quot;;
</span><span id="__span-107-6"><a id="__codelineno-107-6" name="__codelineno-107-6"></a>
</span><span id="__span-107-7"><a id="__codelineno-107-7" name="__codelineno-107-7"></a>set lc_time = &#39;ZH_CN.utf8&#39;;
</span><span id="__span-107-8"><a id="__codelineno-107-8" name="__codelineno-107-8"></a>execute stmt;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-108-1">1</a></span>
<span class="normal"><a href="#__codelineno-108-2">2</a></span>
<span class="normal"><a href="#__codelineno-108-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-108-1"><a id="__codelineno-108-1" name="__codelineno-108-1"></a>              plain           |         with TM          
</span><span id="__span-108-2"><a id="__codelineno-108-2" name="__codelineno-108-2"></a>--------------------------------------------+----------------------------------
</span><span id="__span-108-3"><a id="__codelineno-108-3" name="__codelineno-108-3"></a> Monday   , 01st February , 2,021 | 星期一, 01st 二月, 2,021
</span></code></pre></div></td></tr></table></div>
<p>注：对于Unix操作系统，可以使用命令：locale -a来查看支持列表，来设置有效值。</p>
<ul>
<li>FX修饰符
  to_timestamp和to_date跳过了输入字符串开头和日期和时间值周围的多个空格，除非使用了FX选项。例如：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-109-1">1</a></span>
<span class="normal"><a href="#__codelineno-109-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-109-1"><a id="__codelineno-109-1" name="__codelineno-109-1"></a>set timezone = &#39;UTC&#39;;
</span><span id="__span-109-2"><a id="__codelineno-109-2" name="__codelineno-109-2"></a>select to_timestamp(&#39;2000    JUN&#39;, &#39;YYYY MON&#39;)::text;
</span></code></pre></div></td></tr></table></div>
<p>可以工作，返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-110-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-110-1"><a id="__codelineno-110-1" name="__codelineno-110-1"></a>2000-06-01 00:00:00+00
</span></code></pre></div></td></tr></table></div>
<p>但是如下返回一个错误，因为to_timestamp只期望一个空格。</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-111-1">1</a></span>
<span class="normal"><a href="#__codelineno-111-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-111-1"><a id="__codelineno-111-1" name="__codelineno-111-1"></a>set timezone = &#39;UTC&#39;;
</span><span id="__span-111-2"><a id="__codelineno-111-2" name="__codelineno-111-2"></a>select to_timestamp(&#39;2000    JUN&#39;, &#39;FXYYYY MON&#39;)::text;。
</span></code></pre></div></td></tr></table></div>
<ul>
<li>只有YYY、YY或Y的模板模式
  使用to_date()和to_timestamp()，如果要转换的文本值中，假定的“years”子字符串少于四位数字，并且模板模式为YYY、YY或Y，则“years（年份）”子字符串用数字填充，以生成四位字符串，年份将被调整为最接近于 2020 年。</li>
</ul>
<p>例如：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-112-1">1</a></span>
<span class="normal"><a href="#__codelineno-112-2">2</a></span>
<span class="normal"><a href="#__codelineno-112-3">3</a></span>
<span class="normal"><a href="#__codelineno-112-4">4</a></span>
<span class="normal"><a href="#__codelineno-112-5">5</a></span>
<span class="normal"><a href="#__codelineno-112-6">6</a></span>
<span class="normal"><a href="#__codelineno-112-7">7</a></span>
<span class="normal"><a href="#__codelineno-112-8">8</a></span>
<span class="normal"><a href="#__codelineno-112-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-112-1"><a id="__codelineno-112-1" name="__codelineno-112-1"></a>with c as (
</span><span id="__span-112-2"><a id="__codelineno-112-2" name="__codelineno-112-2"></a>  select &#39;15-Jun-100&#39;::text as t1, &#39;15-Jun-999&#39;::text as t2)
</span><span id="__span-112-3"><a id="__codelineno-112-3" name="__codelineno-112-3"></a>select
</span><span id="__span-112-4"><a id="__codelineno-112-4" name="__codelineno-112-4"></a>  to_date(t1, &#39;dd-Mon-YYYY&#39;) ::text  as &quot;t1 using YYYY&quot;,
</span><span id="__span-112-5"><a id="__codelineno-112-5" name="__codelineno-112-5"></a>  to_date(t2, &#39;dd-Mon-YYYY&#39;) ::text  as &quot;t2 using YYYY&quot;,
</span><span id="__span-112-6"><a id="__codelineno-112-6" name="__codelineno-112-6"></a>
</span><span id="__span-112-7"><a id="__codelineno-112-7" name="__codelineno-112-7"></a>  to_date(t1, &#39;dd-Mon-YYY&#39;)  ::text  as &quot;t1 using YYY&quot;,
</span><span id="__span-112-8"><a id="__codelineno-112-8" name="__codelineno-112-8"></a>  to_date(t2, &#39;dd-Mon-YYY&#39;)  ::text  as &quot;t2 using YYY&quot;
</span><span id="__span-112-9"><a id="__codelineno-112-9" name="__codelineno-112-9"></a>from c;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-113-1">1</a></span>
<span class="normal"><a href="#__codelineno-113-2">2</a></span>
<span class="normal"><a href="#__codelineno-113-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-113-1"><a id="__codelineno-113-1" name="__codelineno-113-1"></a> t1 using YYYY | t2 using YYYY | t1 using YYY | t2 using YYY
</span><span id="__span-113-2"><a id="__codelineno-113-2" name="__codelineno-113-2"></a>---------------------+-------------------+-----------------+-----------------
</span><span id="__span-113-3"><a id="__codelineno-113-3" name="__codelineno-113-3"></a> 0100-06-15    | 0999-06-15    | 2100-06-15  | 1999-06-15 
</span></code></pre></div></td></tr></table></div>
<p>请注意，如果您想将“6781123”::text解释为“0678-11-23”::date，这将带来挑战。试着执行如下示例：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-114-1">1</a></span>
<span class="normal"><a href="#__codelineno-114-2">2</a></span>
<span class="normal"><a href="#__codelineno-114-3">3</a></span>
<span class="normal"><a href="#__codelineno-114-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-114-1"><a id="__codelineno-114-1" name="__codelineno-114-1"></a>select
</span><span id="__span-114-2"><a id="__codelineno-114-2" name="__codelineno-114-2"></a>  to_date(&#39;6781123&#39;,   &#39;YYYYMMDD&#39;)   as &quot;1st try&quot;,
</span><span id="__span-114-3"><a id="__codelineno-114-3" name="__codelineno-114-3"></a>  to_date(&#39;6781123&#39;,   &#39;YYYMMDD&#39;)    as &quot;2nd try&quot;,
</span><span id="__span-114-4"><a id="__codelineno-114-4" name="__codelineno-114-4"></a>  to_date(&#39;678-11-23&#39;, &#39;YYYY-MM-DD&#39;) as &quot;workaround&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-115-1">1</a></span>
<span class="normal"><a href="#__codelineno-115-2">2</a></span>
<span class="normal"><a href="#__codelineno-115-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-115-1"><a id="__codelineno-115-1" name="__codelineno-115-1"></a>  1st try    |  2nd try  | workaround
</span><span id="__span-115-2"><a id="__codelineno-115-2" name="__codelineno-115-2"></a>----------------+--------------+---------------
</span><span id="__span-115-3"><a id="__codelineno-115-3" name="__codelineno-115-3"></a> 6781-12-03 | 1678-11-23 | 0678-11-23
</span></code></pre></div></td></tr></table></div>
<p>无论是第一次，还是第二次尝试都不是你想要的东西。您唯一的选择是，要求输入解释为YYYY、MM和DD的子字符串之间有分隔符，如解决方法所示。</p>
<ul>
<li>解释“years”子字符串超过四位的文本值
  您可以使用to_date()和to_timestamp()将类似“21234-1123”的文本值与模板“YYYY-MMDD”进行正确转换。您还可以使用to_date()和to_timestamp()将类似“21231123”的文本值转换为模板“YYYYMMDD”，而不会出现错误。试着执行如下示例：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-116-1">1</a></span>
<span class="normal"><a href="#__codelineno-116-2">2</a></span>
<span class="normal"><a href="#__codelineno-116-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-116-1"><a id="__codelineno-116-1" name="__codelineno-116-1"></a>select
</span><span id="__span-116-2"><a id="__codelineno-116-2" name="__codelineno-116-2"></a>  to_date(&#39;21234-1123&#39;, &#39;YYYY-MMDD&#39;) ::text as d1,
</span><span id="__span-116-3"><a id="__codelineno-116-3" name="__codelineno-116-3"></a>  to_date(&#39;21231123&#39;, &#39;YYYYMMDD&#39;)    ::text as d2;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-117-1">1</a></span>
<span class="normal"><a href="#__codelineno-117-2">2</a></span>
<span class="normal"><a href="#__codelineno-117-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-117-1"><a id="__codelineno-117-1" name="__codelineno-117-1"></a>      d1     |     d2
</span><span id="__span-117-2"><a id="__codelineno-117-2" name="__codelineno-117-2"></a>-------------------+--------------
</span><span id="__span-117-3"><a id="__codelineno-117-3" name="__codelineno-117-3"></a>  21234-11-23 | 2123-11-23
</span></code></pre></div></td></tr></table></div>
<p>但是，您不能简单使用模板，使用to_date()和to_timestamp()来转换类似“212341123”的文本值。如下所示：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-118-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-118-1"><a id="__codelineno-118-1" name="__codelineno-118-1"></a>select to_date(&#39;212341123&#39;, &#39;YYYYMMDD&#39;);
</span></code></pre></div></td></tr></table></div>
<p>这将会返回如下错误信息：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-119-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-119-1"><a id="__codelineno-119-1" name="__codelineno-119-1"></a>date/time field value out of range: &quot;212341123&quot;
</span></code></pre></div></td></tr></table></div>
<p>即使用一个额外的Y把“YYYYMMDD”改成“YYYYYMDDD”，也仍然会报告如下错误信息： </p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-120-1">1</a></span>
<span class="normal"><a href="#__codelineno-120-2">2</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-120-1"><a id="__codelineno-120-1" name="__codelineno-120-1"></a>conflicting values for &quot;Y&quot; field in formatting string
</span><span id="__span-120-2"><a id="__codelineno-120-2" name="__codelineno-120-2"></a>This value contradicts a previous setting for the same field type.
</span></code></pre></div></td></tr></table></div>
<p>您唯一的正确选择是，确保要转换的文本值中的“years”子字符串，以非数字字符结束，并且模板与之前使用的代码示例to_date('21234-1123'，'YYYY-MMDD')中的字符匹配。</p>
<ul>
<li>CC模板模式
  使用to_date()和to_timestamp()，可以接受CC模板模式，但如果存在YYYY、YYYY或Y、YYY模式，则会忽略该模式。如果CC与YY或Y模式一起使用，则计算结果为指定世纪中的年份。如果指定了世纪，但没有指定年份，则假定为世纪的第一年。 
  例如：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-121-1">1</a></span>
<span class="normal"><a href="#__codelineno-121-2">2</a></span>
<span class="normal"><a href="#__codelineno-121-3">3</a></span>
<span class="normal"><a href="#__codelineno-121-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-121-1"><a id="__codelineno-121-1" name="__codelineno-121-1"></a>select
</span><span id="__span-121-2"><a id="__codelineno-121-2" name="__codelineno-121-2"></a>  to_date(&#39;19 2021&#39;, &#39;CC YYYY&#39;) as &quot;result 1&quot;,
</span><span id="__span-121-3"><a id="__codelineno-121-3" name="__codelineno-121-3"></a>  to_date(&#39;19 21&#39;, &#39;CC YY&#39;)     as &quot;result 2&quot;,
</span><span id="__span-121-4"><a id="__codelineno-121-4" name="__codelineno-121-4"></a>  to_date(&#39;19&#39;, &#39;CC&#39;)           as &quot;result 3&quot;;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-122-1">1</a></span>
<span class="normal"><a href="#__codelineno-122-2">2</a></span>
<span class="normal"><a href="#__codelineno-122-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-122-1"><a id="__codelineno-122-1" name="__codelineno-122-1"></a>  result 1   |  result 2   |  result 3
</span><span id="__span-122-2"><a id="__codelineno-122-2" name="__codelineno-122-2"></a>----------------+----------------+--------------
</span><span id="__span-122-3"><a id="__codelineno-122-3" name="__codelineno-122-3"></a> 2021-01-01 | 1821-01-01  | 1801-01-01
</span></code></pre></div></td></tr></table></div>
<ul>
<li>普通文本
  在to_char模板里可以有普通文本，并且它们会被照字面输出。你可以把一个子串放到双引号里强迫它被解释成一个文本，即使它里面包含模板模式也如此。例如，在 '"Hello Year "YYYY'中，YYYY将被年份数据代替，但是Year中单独的Y不会。在to_date、to_number以及to_timestamp中，文本和双引号字符串会导致跳过该字符串中所包含的字符数量，例如"XX"会跳过两个输入字符（不管它们是不是XX）。
  例如：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-123-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-123-1"><a id="__codelineno-123-1" name="__codelineno-123-1"></a>select to_char(&#39;2021, 06-15&#39;::date, &#39;&quot;Hello Year &quot;YYYY on Dy ddth Mon&#39;) as d1;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-124-1">1</a></span>
<span class="normal"><a href="#__codelineno-124-2">2</a></span>
<span class="normal"><a href="#__codelineno-124-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-124-1"><a id="__codelineno-124-1" name="__codelineno-124-1"></a>               d1                
</span><span id="__span-124-2"><a id="__codelineno-124-2" name="__codelineno-124-2"></a>-----------------------------------------
</span><span id="__span-124-3"><a id="__codelineno-124-3" name="__codelineno-124-3"></a> Hello Year 2021 on Tue 15th Jun
</span></code></pre></div></td></tr></table></div>
<ul>
<li>输出里有双引号
  如果你想在输出里有双引号，那么你必须在它们前面放反斜线，例如 '\"YYYY Month\"'。不然，在双引号字符串外面的反斜线就不是特殊的。在双引号字符串内，反斜线会导致下一个字符被取其字面形式，不管它是什么字符（但是这没有特殊效果，除非下一个字符是一个双引号或者另一个反斜线）。
  例如：</li>
</ul>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-125-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-125-1"><a id="__codelineno-125-1" name="__codelineno-125-1"></a>select to_char(&#39;2021, 06-15&#39;::date, &#39;\&quot;Hello &quot;Y&quot;ear\&quot;YYYY on Dy ddth Mon&#39;) as d1;
</span></code></pre></div></td></tr></table></div>
<p>返回信息如下：</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-126-1">1</a></span>
<span class="normal"><a href="#__codelineno-126-2">2</a></span>
<span class="normal"><a href="#__codelineno-126-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-126-1"><a id="__codelineno-126-1" name="__codelineno-126-1"></a>                d1                
</span><span id="__span-126-2"><a id="__codelineno-126-2" name="__codelineno-126-2"></a>-------------------------------------------
</span><span id="__span-126-3"><a id="__codelineno-126-3" name="__codelineno-126-3"></a> &quot;Hello Year&quot;2021 on Tue 15th Jun
</span></code></pre></div></td></tr></table></div>
<ul>
<li>在to_timestamp和to_date中，负的年份被视为表示BC。 如果你同时写一个负的年份和一个显式的BC字段，你又会得到AD。第0年的输入被视为公元前1年。</li>
<li>在to_timestamp和to_date中，工作日名称或编号（DAY、D以及相关的字段类型）会被接受，但会为了计算结果的目的而忽略。季度（Q）字段也是一样。</li>
<li>在to_timestamp和to_date中，一个 ISO 8601 周编号的日期（与一个格里高利日期相区别）可以用两种方法之一被指定为to_timestamp和to_date：
  1）年、周编号和工作日：例如to_date('2006-42-4', 'IYYY-IW-ID')返回日期2006-10-19。如果你忽略工作日，它被假定为 1（周一）。
  2）年和一年中的日：例如to_date('2006-291', 'IYYY-IDDD')也返回2006-10-19。</li>
</ul>
<p>尝试使用一个混合了 ISO 8601 周编号和格里高利日期的域来输入一个日期是无意义的，并且将导致一个错误。在一个 ISO 周编号的年的环境下，一个“月”或“月中的日”的概念没有意义。在一个格里高利年的环境下，ISO 周没有意义。用户应当避免混合格里高利和 ISO 日期声明。</p>
<p>小心
虽然to_date将会拒绝混合使用格里高利和 ISO 周编号日期的域， to_char却不会，因为YYYY-MM-DD (IYYY-IDDD) 这种输出格式也会有用。但是避免写类似IYYY-MM-DD的东西，那会得到在起始年附近令人惊讶的结果。</p>
<ul>
<li>在to_timestamp中，毫秒（MS）和微秒（US）域都被用作小数点后的秒位。例如to_timestamp('12.3', 'SS.MS')不是 3 毫秒, 而是 300，因为该转换把它看做 12 + 0.3 秒。这意味着对于格式SS.MS而言，输入值12.3、12.30和12.300指定了相同数目的毫秒。要得到三毫秒，你必须使用 12.003，转换会把它看做 12 + 0.003 = 12.003 秒。</li>
</ul>
<p>下面是一个更复杂的示例∶to_timestamp('15:12:02.020.001230', 'HH24:MI:SS.MS.US')是 15 小时、12 分钟和 2 秒 + 20 毫秒 + 1230微秒 = 2.021230 秒。</p>
<ul>
<li>to_char(..., 'ID')的一周中日的编号匹配extract(isodow from ...)函数，但是to_char(..., 'D')不匹配extract(dow from ...)的日编号。</li>
<li>to_char(interval)格式化HH和HH12为显示在一个 12 小时的时钟上，即零小时和 36 小时输出为12，而HH24会输出完整的小时值，对于间隔它可以超过 23。</li>
</ul>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="页脚" >
        
          
          <a href="Character.html" class="md-footer__link md-footer__link--prev" aria-label="上一页: Character">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                上一页
              </span>
              <div class="md-ellipsis">
                Character
              </div>
            </div>
          </a>
        
        
          
          <a href="json.html" class="md-footer__link md-footer__link--next" aria-label="下一页: json">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                下一页
              </span>
              <div class="md-ellipsis">
                json
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2023 - 2024 贝格迈思（深圳）技术有限公司 粤ICP备17054434号-1
    </div>
  
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/as599397086/BMDOC" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "content.action.edit", "content.action.view", "content.code.annotate", "content.code.copy", "content.code.select", "content.tabs.link", "content.tooltips", "navigation.footer", "navigation.indexes", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.prune", "navigation.tabs.sticky", "navigation.top", "navigation.tracking", "search.highlight", "search.share", "search.suggest", "toc.follow"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>