## **格式化函数**

| 函数                                 | 描述                                   |
| ------------------------------------ | -------------------------------------- |
| [to_char()](#_to_char()_1)           | 根据给定的格式将时间戳转换为字符串。   |
| [to_char()](#_to_char()_2)           | 根据给定的格式将时间间隔转换为字符串。 |
| [to_char()](#_to_char()_3)           | 根据给定的格式将数字转换为字符串       |
| [to_date()](#_to_date()_1)           | 根据给定的格式将字符串转换为日期。     |
| [to_number()](#_to_number())         | 根据给定的格式将字符串转换为数字。     |
| [to_timestamp()](#_to_timestamp()_2) | 根据给定的格式将字符串转换为时间戳。   |

### **to_char()**

详细描述信息，请参考数据类型date与time的[格式化函数](#_格式化函数)的相关部分。

### **to_char()**

目的：根据给定的格式将时间间隔转换为字符串。

语法：

输入值:      integer, text
返回值:      text 

例如：

```
select to_char(interval '15h 2m 12s', 'HH24:MI:SS'); 
```

返回信息如下：

```
15:02:12
```

### **to_char()**

目的：根据给定的格式将数字转换为字符串。

语法：

输入值:      bigint, text 
返回值:      text 

或者

输入值:      double precision, text
返回值:      text 

或者

输入值:      integer, text
返回值:      text 

或者

输入值:      numeric, text
返回值:      text 

或者

输入值:      real, text
返回值:      text 

例如：

```
select to_char(125.8::real, '999D9'); 
```

返回信息如下：

```
125.8
```

 


### **to_date()**

详细描述信息，请参考数据类型date与time的[格式化函数](#_格式化函数)的相关部分。

### **to_number()**

目的：根据给定的格式将字符串转换为数字。

输入值:      text, text
返回值:      numeric

例如：

```
select to_number('12,454.8-', '99G999D9S');
```

返回信息如下：

```
-12454.8
```

### **to_timestamp()**

详细描述信息，请参考数据类型date与time的[格式化函数](#_格式化函数)的相关部分。

## **模板模式**

用于数字格式化的模板模式如下：

| 模式       | 描述                              |
| ---------- | --------------------------------- |
| 9          | 数位（如果无意义可以被删除）      |
| 0          | 数位（即便没有意义也不会被删除）  |
| . (period) | 小数点                            |
| , (comma)  | 分组（千）分隔符                  |
| PR         | 尖括号内的负值                    |
| S          | 带符号的数字（使用区域）          |
| L          | 货币符号（使用区域）              |
| D          | 小数点（使用区域）                |
| G          | 分组分隔符（使用区域）            |
| MI         | 在指定位置的负号（如果数字 < 0）  |
| PL         | 在指定位置的正号（如果数字 > 0）  |
| SG         | 在指定位置的正/负号               |
| RN         | 罗马数字（输入在 1 和 3999 之间） |
| TH or th   | 序数后缀                          |
| V          | 移动指定位数（参阅注解）          |
| EEEE       | 科学记数的指数                    |

数字格式化的用法须知：

* 0指定一个总是被打印的数位，即便它包含前导/拖尾的零。9也指定一个数位，但是如果它是前导零则会被空格替换，而如果是拖尾零并且指定了填充模式则它会被删除（对于to_number()来说，这两种模式字符等效）。

* 模式字符S、L、D以及G表示当前locale定义的负号、货币符号、小数点以及数字分隔符字符。不管locale是什么，模式字符句号和逗号就表示小数点和数字分隔符。

* 对于to_char()的模式中的一个负号，如果没有明确的规定，将为该负号保留一列，并且它将被锚接到（出现在左边）那个数字。如果S正好出现在某个9的左边，它也将被锚接到那个数字。

* 使用SG、PL或MI格式化的符号并不挂在数字上面； 例如，to_char(-12, 'MI9999')生成'-  12'，而to_char(-12, 'S9999')生成 '  -12'。

* TH不会转换小于零的数值，也不会转换小数。

* PL、SG和TH是PostgreSQL扩展。

* 在to_number中，如果没有使用L或TH之类的非数据模板模式，相应数量的输入字符会被跳过，不管它们是否匹配模板模式，除非它们是数据字符（也就是数位、负号、小数点或者逗号）。例如，TH会跳过两个非数据字符。

* 带有to_char的V会把输入值乘上10^n，其中n是跟在V后面的位数。带有to_number的V以类似的方式做除法。to_char和to_number不支持使用结合小数点的V（例如，不允许99.9V99）。

* EEEE（科学记数法）不能和任何其他格式化模式或修饰语（数字和小数点模式除外）组合在一起使用，并且必须位于格式化字符串的最后（例如9.99EEEE是一个合法的模式）。

* 某些修饰语可以被应用到任何模板来改变其行为。例如，FM99.99是带有FM修饰语的99.99模式。下表展示了用于数字格式化模式修饰语。


| 修饰语    | 描述                               | 示例    |
| --------- | ---------------------------------- | ------- |
| FM prefix | 填充模式（抑制拖尾零和填充的空白） | FM99.99 |
| TH suffix | 大写序数后缀                       | 999TH   |
| th suffix | 小写序数后缀                       | 999th   |
